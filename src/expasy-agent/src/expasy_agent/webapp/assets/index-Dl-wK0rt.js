var js=Object.defineProperty;var Hs=(r,e,t)=>e in r?js(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ee=(r,e,t)=>Hs(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const Fs=!1,Gs=(r,e)=>r===e,Ws=Symbol("solid-track"),In={equals:Gs};let cs=ps;const ut=1,Ln=2,us={owned:null,cleanups:null,context:null,owner:null};var be=null;let Zn=null,qs=null,he=null,Se=null,rt=null,Un=0;function Cn(r,e){const t=he,n=be,s=r.length===0,i=e===void 0?n:e,a=s?us:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?r:()=>r(()=>ln(()=>sn(a)));be=a,he=null;try{return un(o,!0)}finally{he=t,be=n}}function He(r,e){e=e?Object.assign({},In,e):In;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=s=>(typeof s=="function"&&(s=s(t.value)),hs(t,s));return[fs.bind(t),n]}function je(r,e,t){const n=dr(r,e,!1,ut);cn(n)}function Or(r,e,t){cs=Xs;const n=dr(r,e,!1,ut);n.user=!0,rt?rt.push(n):cn(n)}function en(r,e,t){t=t?Object.assign({},In,t):In;const n=dr(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,cn(n),fs.bind(n)}function ln(r){if(he===null)return r();const e=he;he=null;try{return r()}finally{he=e}}function Ks(r){return be===null||(be.cleanups===null?be.cleanups=[r]:be.cleanups.push(r)),r}function fs(){if(this.sources&&this.state)if(this.state===ut)cn(this);else{const r=Se;Se=null,un(()=>Pn(this),!1),Se=r}if(he){const r=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(r)):(he.sources=[this],he.sourceSlots=[r]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function hs(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&un(()=>{for(let s=0;s<r.observers.length;s+=1){const i=r.observers[s],a=Zn&&Zn.running;a&&Zn.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?Se.push(i):rt.push(i),i.observers&&ds(i)),a||(i.state=ut)}if(Se.length>1e6)throw Se=[],new Error},!1)),e}function cn(r){if(!r.fn)return;sn(r);const e=Un;Zs(r,r.value,e)}function Zs(r,e,t){let n;const s=be,i=he;he=be=r;try{n=r.fn(e)}catch(a){return r.pure&&(r.state=ut,r.owned&&r.owned.forEach(sn),r.owned=null),r.updatedAt=t+1,gs(a)}finally{he=i,be=s}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?hs(r,n):r.value=n,r.updatedAt=t)}function dr(r,e,t,n=ut,s){const i={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:be,context:be?be.context:null,pure:t};return be===null||be!==us&&(be.owned?be.owned.push(i):be.owned=[i]),i}function Mn(r){if(r.state===0)return;if(r.state===Ln)return Pn(r);if(r.suspense&&ln(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Un);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===ut)cn(r);else if(r.state===Ln){const n=Se;Se=null,un(()=>Pn(r,e[0]),!1),Se=n}}function un(r,e){if(Se)return r();let t=!1;e||(Se=[]),rt?t=!0:rt=[],Un++;try{const n=r();return Ys(t),n}catch(n){t||(rt=null),Se=null,gs(n)}}function Ys(r){if(Se&&(ps(Se),Se=null),r)return;const e=rt;rt=null,e.length&&un(()=>cs(e),!1)}function ps(r){for(let e=0;e<r.length;e++)Mn(r[e])}function Xs(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:Mn(n)}for(e=0;e<t;e++)Mn(r[e])}function Pn(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const n=r.sources[t];if(n.sources){const s=n.state;s===ut?n!==e&&(!n.updatedAt||n.updatedAt<Un)&&Mn(n):s===Ln&&Pn(n,e)}}}function ds(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=Ln,t.pure?Se.push(t):rt.push(t),t.observers&&ds(t))}}function sn(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),s=t.observers;if(s&&s.length){const i=s.pop(),a=t.observerSlots.pop();n<s.length&&(i.sourceSlots[a]=n,s[n]=i,t.observerSlots[n]=a)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)sn(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)sn(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function Qs(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function gs(r,e=be){throw Qs(r)}const Vs=Symbol("fallback");function Cr(r){for(let e=0;e<r.length;e++)r[e]()}function Js(r,e,t={}){let n=[],s=[],i=[],a=0,o=e.length>1?[]:null;return Ks(()=>Cr(i)),()=>{let l=r()||[],c=l.length,u,h;return l[Ws],ln(()=>{let m,E,w,k,L,$,C,M,j;if(c===0)a!==0&&(Cr(i),i=[],n=[],s=[],a=0,o&&(o=[])),t.fallback&&(n=[Vs],s[0]=Cn(xe=>(i[0]=xe,t.fallback())),a=1);else if(a===0){for(s=new Array(c),h=0;h<c;h++)n[h]=l[h],s[h]=Cn(g);a=c}else{for(w=new Array(c),k=new Array(c),o&&(L=new Array(c)),$=0,C=Math.min(a,c);$<C&&n[$]===l[$];$++);for(C=a-1,M=c-1;C>=$&&M>=$&&n[C]===l[M];C--,M--)w[M]=s[C],k[M]=i[C],o&&(L[M]=o[C]);for(m=new Map,E=new Array(M+1),h=M;h>=$;h--)j=l[h],u=m.get(j),E[h]=u===void 0?-1:u,m.set(j,h);for(u=$;u<=C;u++)j=n[u],h=m.get(j),h!==void 0&&h!==-1?(w[h]=s[u],k[h]=i[u],o&&(L[h]=o[u]),h=E[h],m.set(j,h)):i[u]();for(h=$;h<c;h++)h in w?(s[h]=w[h],i[h]=k[h],o&&(o[h]=L[h],o[h](h))):s[h]=Cn(g);s=s.slice(0,a=c),n=l.slice(0)}return s});function g(m){if(i[h]=m,o){const[E,w]=He(h);return o[h]=w,e(l[h],E)}return e(l[h])}}}function Nt(r,e){return ln(()=>r(e||{}))}function It(r){const e="fallback"in r&&{fallback:()=>r.fallback};return en(Js(()=>r.each,r.children,e||void 0))}function ei(r,e,t){let n=t.length,s=e.length,i=n,a=0,o=0,l=e[s-1].nextSibling,c=null;for(;a<s||o<i;){if(e[a]===t[o]){a++,o++;continue}for(;e[s-1]===t[i-1];)s--,i--;if(s===a){const u=i<n?o?t[o-1].nextSibling:t[i-o]:l;for(;o<i;)r.insertBefore(t[o++],u)}else if(i===o)for(;a<s;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===t[i-1]&&t[o]===e[s-1]){const u=e[--s].nextSibling;r.insertBefore(t[o++],e[a++].nextSibling),r.insertBefore(t[--i],u),e[s]=t[i]}else{if(!c){c=new Map;let h=o;for(;h<i;)c.set(t[h],h++)}const u=c.get(e[a]);if(u!=null)if(o<u&&u<i){let h=a,g=1,m;for(;++h<s&&h<i&&!((m=c.get(e[h]))==null||m!==u+g);)g++;if(g>u-o){const E=e[a];for(;o<u;)r.insertBefore(t[o++],E)}else r.replaceChild(t[o++],e[a++])}else a++;else e[a++].remove()}}}const Nr="_$DX_DELEGATE";function Ae(r,e,t,n){let s;const i=()=>{const o=document.createElement("template");return o.innerHTML=r,o.content.firstChild},a=()=>(s||(s=i())).cloneNode(!0);return a.cloneNode=a,a}function ti(r,e=window.document){const t=e[Nr]||(e[Nr]=new Set);for(let n=0,s=r.length;n<s;n++){const i=r[n];t.has(i)||(t.add(i),e.addEventListener(i,ni))}}function _e(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function Gt(r,e){e==null?r.removeAttribute("class"):r.className=e}function Ir(r,e,t){return ln(()=>r(e,t))}function me(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return $n(r,e,n,t);je(s=>$n(r,e(),s,t),n)}function ni(r){let e=r.target;const t=`$$${r.type}`,n=r.target,s=r.currentTarget,i=l=>Object.defineProperty(r,"target",{configurable:!0,value:l}),a=()=>{const l=e[t];if(l&&!e.disabled){const c=e[`${t}Data`];if(c!==void 0?l.call(e,c,r):l.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&i(e.host),!0},o=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const l=r.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(e=l[c],!!a());c++){if(e._$host){e=e._$host,o();break}if(e.parentNode===s)break}}else o();i(n)}function $n(r,e,t,n,s){for(;typeof t=="function";)t=t();if(e===t)return t;const i=typeof e,a=n!==void 0;if(r=a&&t[0]&&t[0].parentNode||r,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===t))return t;if(a){let o=t[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),t=Lt(r,t,n,o)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||i==="boolean")t=Lt(r,t,n);else{if(i==="function")return je(()=>{let o=e();for(;typeof o=="function";)o=o();t=$n(r,o,t,n)}),()=>t;if(Array.isArray(e)){const o=[],l=t&&Array.isArray(t);if(ur(o,e,t,s))return je(()=>t=$n(r,o,t,n,!0)),()=>t;if(o.length===0){if(t=Lt(r,t,n),a)return t}else l?t.length===0?Lr(r,o,n):ei(r,t,o):(t&&Lt(r),Lr(r,o));t=o}else if(e.nodeType){if(Array.isArray(t)){if(a)return t=Lt(r,t,n,e);Lt(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function ur(r,e,t,n){let s=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],l=t&&t[r.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)r.push(o);else if(Array.isArray(o))s=ur(r,o,l)||s;else if(c==="function")if(n){for(;typeof o=="function";)o=o();s=ur(r,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||s}else r.push(o),s=!0;else{const u=String(o);l&&l.nodeType===3&&l.data===u?r.push(l):r.push(document.createTextNode(u))}}return s}function Lr(r,e,t=null){for(let n=0,s=e.length;n<s;n++)r.insertBefore(e[n],t)}function Lt(r,e,t,n){if(t===void 0)return r.textContent="";const s=n||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(s!==o){const l=o.parentNode===r;!i&&!a?l?r.replaceChild(s,o):r.insertBefore(s,t):l&&o.remove()}else i=!0}}else r.insertBefore(s,t);return[s]}function ri(r){return Object.keys(r).reduce((t,n)=>{const s=r[n];return t[n]=Object.assign({},s),bs(s.value)&&!li(s.value)&&!Array.isArray(s.value)&&(t[n].value=Object.assign({},s.value)),Array.isArray(s.value)&&(t[n].value=s.value.slice(0)),t},{})}function si(r){return r?Object.keys(r).reduce((t,n)=>{const s=r[n];return t[n]=bs(s)&&"value"in s?s:{value:s},t[n].attribute||(t[n].attribute=ai(n)),t[n].parse="parse"in t[n]?t[n].parse:typeof t[n].value!="string",t},{}):{}}function ii(r){return Object.keys(r).reduce((t,n)=>(t[n]=r[n].value,t),{})}function oi(r,e){const t=ri(e);return Object.keys(e).forEach(s=>{const i=t[s],a=r.getAttribute(i.attribute),o=r[s];a!=null&&(i.value=i.parse?ms(a):a),o!=null&&(i.value=Array.isArray(o)?o.slice(0):o),i.reflect&&Mr(r,i.attribute,i.value,!!i.parse),Object.defineProperty(r,s,{get(){return i.value},set(l){const c=i.value;i.value=l,i.reflect&&Mr(this,i.attribute,i.value,!!i.parse);for(let u=0,h=this.__propertyChangedCallbacks.length;u<h;u++)this.__propertyChangedCallbacks[u](s,l,c)},enumerable:!0,configurable:!0})}),t}function ms(r){if(r)try{return JSON.parse(r)}catch{return r}}function Mr(r,e,t,n){if(t==null||t===!1)return r.removeAttribute(e);let s=n?JSON.stringify(t):t;r.__updating[e]=!0,s==="true"&&(s=""),r.setAttribute(e,s),Promise.resolve().then(()=>delete r.__updating[e])}function ai(r){return r.replace(/\.?([A-Z]+)/g,(e,t)=>"-"+t.toLowerCase()).replace("_","-").replace(/^-/,"")}function bs(r){return r!=null&&(typeof r=="object"||typeof r=="function")}function li(r){return Object.prototype.toString.call(r)==="[object Function]"}function ci(r){return typeof r=="function"&&r.toString().indexOf("class")===0}let tn;function ui(){Object.defineProperty(tn,"renderRoot",{value:tn})}function fi(r,e){const t=Object.keys(e);return class extends r{static get observedAttributes(){return t.map(s=>e[s].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=oi(this,e);const s=ii(this.props),i=this.Component,a=tn;try{tn=this,this.__initialized=!0,ci(i)?new i(s,{element:this}):i(s,{element:this})}finally{tn=a}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let s=null;for(;s=this.__releaseCallbacks.pop();)s(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(s,i,a){if(this.__initialized&&!this.__updating[s]&&(s=this.lookupProp(s),s in e)){if(a==null&&!this[s])return;this[s]=e[s].parse?ms(a):a}}lookupProp(s){if(e)return t.find(i=>s===i||s===e[i].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(s){this.__releaseCallbacks.push(s)}addPropertyChangedCallback(s){this.__propertyChangedCallbacks.push(s)}}}function hi(r,e={},t={}){const{BaseElement:n=HTMLElement,extension:s,customElements:i=window.customElements}=t;return a=>{let o=i.get(r);return o?(o.prototype.Component=a,o):(o=fi(n,si(e)),o.prototype.Component=a,o.prototype.registeredTag=r,i.define(r,o,s),o)}}function pi(r){const e=Object.keys(r),t={};for(let n=0;n<e.length;n++){const[s,i]=He(r[e[n]]);Object.defineProperty(t,e[n],{get:s,set(a){i(()=>a)}})}return t}function di(r){if(r.assignedSlot&&r.assignedSlot._$owner)return r.assignedSlot._$owner;let e=r.parentNode;for(;e&&!e._$owner&&!(e.assignedSlot&&e.assignedSlot._$owner);)e=e.parentNode;return e&&e.assignedSlot?e.assignedSlot._$owner:r._$owner}function gi(r){return(e,t)=>{const{element:n}=t;return Cn(s=>{const i=pi(e);n.addPropertyChangedCallback((o,l)=>i[o]=l),n.addReleaseCallback(()=>{n.renderRoot.textContent="",s()});const a=r(i,t);return me(n.renderRoot,a)},di(n))}}function mi(r,e,t){return arguments.length===2&&(t=e,e={}),hi(r,e)(gi(t))}function gr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let xt=gr();function _s(r){xt=r}const nn={exec:()=>null};function V(r,e=""){let t=typeof r=="string"?r:r.source;const n={replace:(s,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(Ce.caret,"$1"),t=t.replace(s,a),n},getRegex:()=>new RegExp(t,e)};return n}const Ce={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},bi=/^(?:[ \t]*(?:\n|$))+/,_i=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,wi=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,fn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,xi=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ws=/(?:[*+-]|\d{1,9}[.)])/,xs=V(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ws).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),mr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ei=/^[^\n]+/,br=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ki=V(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",br).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ti=V(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ws).getRegex(),jn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_r=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,vi=V("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",_r).replace("tag",jn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Es=V(mr).replace("hr",fn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jn).getRegex(),Si=V(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Es).getRegex(),wr={blockquote:Si,code:_i,def:ki,fences:wi,heading:xi,hr:fn,html:vi,lheading:xs,list:Ti,newline:bi,paragraph:Es,table:nn,text:Ei},Pr=V("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jn).getRegex(),Ai={...wr,table:Pr,paragraph:V(mr).replace("hr",fn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Pr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jn).getRegex()},Ri={...wr,html:V(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_r).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:nn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:V(mr).replace("hr",fn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xs).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ks=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yi=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ts=/^( {2,}|\\)\n(?!\s*$)/,Oi=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Hn=/[\p{P}\p{S}]/u,xr=/[\s\p{P}\p{S}]/u,vs=/[^\s\p{P}\p{S}]/u,Ci=V(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,xr).getRegex(),Ni=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Ii=V(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,Hn).getRegex(),Li=V("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,vs).replace(/punctSpace/g,xr).replace(/punct/g,Hn).getRegex(),Mi=V("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,vs).replace(/punctSpace/g,xr).replace(/punct/g,Hn).getRegex(),Pi=V(/\\(punct)/,"gu").replace(/punct/g,Hn).getRegex(),$i=V(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Di=V(_r).replace("(?:-->|$)","-->").getRegex(),Bi=V("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Di).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Dn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,zi=V(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Dn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ss=V(/^!?\[(label)\]\[(ref)\]/).replace("label",Dn).replace("ref",br).getRegex(),As=V(/^!?\[(ref)\](?:\[\])?/).replace("ref",br).getRegex(),Ui=V("reflink|nolink(?!\\()","g").replace("reflink",Ss).replace("nolink",As).getRegex(),Er={_backpedal:nn,anyPunctuation:Pi,autolink:$i,blockSkip:Ni,br:Ts,code:yi,del:nn,emStrongLDelim:Ii,emStrongRDelimAst:Li,emStrongRDelimUnd:Mi,escape:ks,link:zi,nolink:As,punctuation:Ci,reflink:Ss,reflinkSearch:Ui,tag:Bi,text:Oi,url:nn},ji={...Er,link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",Dn).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Dn).getRegex()},fr={...Er,escape:V(ks).replace("])","~|])").getRegex(),url:V(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Hi={...fr,br:V(Ts).replace("{2,}","*").getRegex(),text:V(fr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},vn={normal:wr,gfm:Ai,pedantic:Ri},Wt={normal:Er,gfm:fr,breaks:Hi,pedantic:ji},Fi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$r=r=>Fi[r];function et(r,e){if(e){if(Ce.escapeTest.test(r))return r.replace(Ce.escapeReplace,$r)}else if(Ce.escapeTestNoEncode.test(r))return r.replace(Ce.escapeReplaceNoEncode,$r);return r}function Dr(r){try{r=encodeURI(r).replace(Ce.percentDecode,"%")}catch{return null}return r}function Br(r,e){var i;const t=r.replace(Ce.findPipe,(a,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),n=t.split(Ce.splitPipe);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(Ce.slashPipe,"|");return n}function qt(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n&&r.charAt(n-s-1)===e;)s++;return r.slice(0,n-s)}function Gi(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<r.length;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])t++;else if(r[n]===e[1]&&(t--,t<0))return n;return-1}function zr(r,e,t,n,s){const i=e.href,a=e.title||null,o=r[1].replace(s.other.outputLinkReplace,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const l={type:"link",raw:t,href:i,title:a,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}return{type:"image",raw:t,href:i,title:a,text:o}}function Wi(r,e,t){const n=r.match(t.other.indentCodeCompensation);if(n===null)return e;const s=n[1];return e.split(`
`).map(i=>{const a=i.match(t.other.beginningSpace);if(a===null)return i;const[o]=a;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}class Bn{constructor(e){ee(this,"options");ee(this,"rules");ee(this,"lexer");this.options=e||xt}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:qt(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=Wi(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const s=qt(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:qt(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=qt(t[0],`
`).split(`
`),s="",i="";const a=[];for(;n.length>0;){let o=!1;const l=[];let c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))l.push(n[c]),o=!0;else if(!o)l.push(n[c]);else break;n=n.slice(c);const u=l.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,i=i?`${i}
${h}`:h;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,a,!0),this.lexer.state.top=g,n.length===0)break;const m=a.at(-1);if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){const E=m,w=E.raw+`
`+n.join(`
`),k=this.blockquote(w);a[a.length-1]=k,s=s.substring(0,s.length-E.raw.length)+k.raw,i=i.substring(0,i.length-E.text.length)+k.text;break}else if((m==null?void 0:m.type)==="list"){const E=m,w=E.raw+`
`+n.join(`
`),k=this.list(w);a[a.length-1]=k,s=s.substring(0,s.length-m.raw.length)+k.raw,i=i.substring(0,i.length-E.raw.length)+k.raw,n=w.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let c=!1,u="",h="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let g=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,$=>" ".repeat(3*$.length)),m=e.split(`
`,1)[0],E=!g.trim(),w=0;if(this.options.pedantic?(w=2,h=g.trimStart()):E?w=t[1].length+1:(w=t[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,h=g.slice(w),w+=t[1].length),E&&this.rules.other.blankLine.test(m)&&(u+=m+`
`,e=e.substring(m.length+1),c=!0),!c){const $=this.rules.other.nextBulletRegex(w),C=this.rules.other.hrRegex(w),M=this.rules.other.fencesBeginRegex(w),j=this.rules.other.headingBeginRegex(w),xe=this.rules.other.htmlBeginRegex(w);for(;e;){const Ee=e.split(`
`,1)[0];let F;if(m=Ee,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),F=m):F=m.replace(this.rules.other.tabCharGlobal,"    "),M.test(m)||j.test(m)||xe.test(m)||$.test(m)||C.test(m))break;if(F.search(this.rules.other.nonSpaceChar)>=w||!m.trim())h+=`
`+F.slice(w);else{if(E||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||M.test(g)||j.test(g)||C.test(g))break;h+=`
`+m}!E&&!m.trim()&&(E=!0),u+=Ee+`
`,e=e.substring(Ee.length+1),g=F.slice(w)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let k=null,L;this.options.gfm&&(k=this.rules.other.listIsTask.exec(h),k&&(L=k[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!k,checked:L,loose:!1,text:h,tokens:[]}),i.raw+=u}const l=i.items.at(-1);l&&(l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd()),i.raw=i.raw.trimEnd();for(let c=0;c<i.items.length;c++)if(this.lexer.state.top=!1,i.items[c].tokens=this.lexer.blockTokens(i.items[c].text,[]),!i.loose){const u=i.items[c].tokens.filter(g=>g.type==="space"),h=u.length>0&&u.some(g=>this.rules.other.anyLine.test(g.raw));i.loose=h}if(i.loose)for(let c=0;c<i.items.length;c++)i.items[c].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:i}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=Br(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const l of s)this.rules.other.tableAlignRight.test(l)?a.align.push("right"):this.rules.other.tableAlignCenter.test(l)?a.align.push("center"):this.rules.other.tableAlignLeft.test(l)?a.align.push("left"):a.align.push(null);for(let l=0;l<n.length;l++)a.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:a.align[l]});for(const l of i)a.rows.push(Br(l,a.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:a.align[u]})));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=qt(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=Gi(t[2],"()");if(a>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],i="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(s);a&&(s=a[1],i=a[3])}else i=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),zr(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[s.toLowerCase()];if(!i){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return zr(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...s[0]].length-1;let o,l,c=a,u=0;const h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+a);(s=h.exec(t))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(l=[...o].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const g=[...s[0]][0].length,m=e.slice(0,a+s.index+g+l);if(Math.min(a,l)%2){const w=m.slice(1,-1);return{type:"em",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}const E=m.slice(2,-2);return{type:"strong",raw:m,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=t[1],s="mailto:"+n):(n=t[1],s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,i;if(t[2]==="@")s=t[0],i="mailto:"+s;else{let a;do a=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(a!==t[0]);s=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}}class We{constructor(e){ee(this,"tokens");ee(this,"options");ee(this,"state");ee(this,"tokenizer");ee(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xt,this.options.tokenizer=this.options.tokenizer||new Bn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Ce,block:vn.normal,inline:Wt.normal};this.options.pedantic?(t.block=vn.pedantic,t.inline=Wt.pedantic):this.options.gfm&&(t.block=vn.gfm,this.options.breaks?t.inline=Wt.breaks:t.inline=Wt.gfm),this.tokenizer.rules=t}static get rules(){return{block:vn,inline:Wt}}static lex(e,t){return new We(t).lex(e)}static lexInline(e,t){return new We(t).inlineTokens(e)}lex(e){e=e.replace(Ce.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var s,i,a;for(this.options.pedantic&&(e=e.replace(Ce.tabCharGlobal,"    ").replace(Ce.spaceLine,""));e;){let o;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(c=>(o=c.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);const c=t.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):t.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),t.push(o);continue}let l=e;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0;const u=e.slice(1);let h;this.options.extensions.startBlock.forEach(g=>{h=g.call({lexer:this},u),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const c=t.at(-1);n&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(o),n=l.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(o);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,l,c;let n=e,s=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i=!1,a="";for(;e;){i||(a=""),i=!1;let u;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(g=>(u=g.call({lexer:this},e,t))?(e=e.substring(u.raw.length),t.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const g=t.at(-1);u.type==="text"&&(g==null?void 0:g.type)==="text"?(g.raw+=u.raw,g.text+=u.text):t.push(u);continue}if(u=this.tokenizer.emStrong(e,n,a)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),t.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),t.push(u);continue}let h=e;if((c=this.options.extensions)!=null&&c.startInline){let g=1/0;const m=e.slice(1);let E;this.options.extensions.startInline.forEach(w=>{E=w.call({lexer:this},m),typeof E=="number"&&E>=0&&(g=Math.min(g,E))}),g<1/0&&g>=0&&(h=e.substring(0,g+1))}if(u=this.tokenizer.inlineText(h)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(a=u.raw.slice(-1)),i=!0;const g=t.at(-1);(g==null?void 0:g.type)==="text"?(g.raw+=u.raw,g.text+=u.text):t.push(u);continue}if(e){const g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return t}}class zn{constructor(e){ee(this,"options");ee(this,"parser");this.options=e||xt}space(e){return""}code({text:e,lang:t,escaped:n}){var a;const s=(a=(t||"").match(Ce.notSpaceStart))==null?void 0:a[0],i=e.replace(Ce.endingNewline,"")+`
`;return s?'<pre><code class="language-'+et(s)+'">'+(n?i:et(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:et(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let s="";for(let o=0;o<e.items.length;o++){const l=e.items[o];s+=this.listitem(l)}const i=t?"ol":"ul",a=t&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+s+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+et(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let s="";for(let i=0;i<e.rows.length;i++){const a=e.rows[i];n="";for(let o=0;o<a.length;o++)n+=this.tablecell(a[o]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${et(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),i=Dr(e);if(i===null)return s;e=i;let a='<a href="'+e+'"';return t&&(a+=' title="'+et(t)+'"'),a+=">"+s+"</a>",a}image({href:e,title:t,text:n}){const s=Dr(e);if(s===null)return et(n);e=s;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${et(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:et(e.text)}}class kr{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class qe{constructor(e){ee(this,"options");ee(this,"renderer");ee(this,"textRenderer");this.options=e||xt,this.options.renderer=this.options.renderer||new zn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new kr}static parse(e,t){return new qe(t).parse(e)}static parseInline(e,t){return new qe(t).parseInline(e)}parse(e,t=!0){var s,i;let n="";for(let a=0;a<e.length;a++){const o=e[a];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[o.type]){const c=o,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){n+=u||"";continue}}const l=o;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;a+1<e.length&&e[a+1].type==="text";)c=e[++a],u+=`
`+this.renderer.text(c);t?n+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):n+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(e,t=this.renderer){var s,i;let n="";for(let a=0;a<e.length;a++){const o=e[a];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[o.type]){const c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=c||"";continue}}const l=o;switch(l.type){case"escape":{n+=t.text(l);break}case"html":{n+=t.html(l);break}case"link":{n+=t.link(l);break}case"image":{n+=t.image(l);break}case"strong":{n+=t.strong(l);break}case"em":{n+=t.em(l);break}case"codespan":{n+=t.codespan(l);break}case"br":{n+=t.br(l);break}case"del":{n+=t.del(l);break}case"text":{n+=t.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}}class rn{constructor(e){ee(this,"options");ee(this,"block");this.options=e||xt}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?We.lex:We.lexInline}provideParser(){return this.block?qe.parse:qe.parseInline}}ee(rn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class qi{constructor(...e){ee(this,"defaults",gr());ee(this,"options",this.setOptions);ee(this,"parse",this.parseMarkdown(!0));ee(this,"parseInline",this.parseMarkdown(!1));ee(this,"Parser",qe);ee(this,"Renderer",zn);ee(this,"TextRenderer",kr);ee(this,"Lexer",We);ee(this,"Tokenizer",Bn);ee(this,"Hooks",rn);this.use(...e)}walkTokens(e,t){var s,i;let n=[];for(const a of e)switch(n=n.concat(t.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)n=n.concat(this.walkTokens(l.tokens,t));for(const l of o.rows)for(const c of l)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=a;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=a;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{const c=o[l].flat(1/0);n=n.concat(this.walkTokens(c,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const a=t.renderers[i.name];a?t.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=t[i.level];a?a.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),s.extensions=t),n.renderer){const i=this.defaults.renderer||new zn(this.defaults);for(const a in n.renderer){if(!(a in i))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const o=a,l=n.renderer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}s.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Bn(this.defaults);for(const a in n.tokenizer){if(!(a in i))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=n.tokenizer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new rn;for(const a in n.hooks){if(!(a in i))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const o=a,l=n.hooks[o],c=i[o];rn.passThroughHooks.has(a)?i[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(g=>c.call(i,g));const h=l.call(i,u);return c.call(i,h)}:i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,a=n.walkTokens;s.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return We.lex(e,t??this.defaults)}parser(e,t){return qe.parse(e,t??this.defaults)}parseMarkdown(e){return(n,s)=>{const i={...s},a={...this.defaults,...i},o=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=e);const l=a.hooks?a.hooks.provideLexer():e?We.lex:We.lexInline,c=a.hooks?a.hooks.provideParser():e?qe.parse:qe.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(u=>l(u,a)).then(u=>a.hooks?a.hooks.processAllTokens(u):u).then(u=>a.walkTokens?Promise.all(this.walkTokens(u,a.walkTokens)).then(()=>u):u).then(u=>c(u,a)).then(u=>a.hooks?a.hooks.postprocess(u):u).catch(o);try{a.hooks&&(n=a.hooks.preprocess(n));let u=l(n,a);a.hooks&&(u=a.hooks.processAllTokens(u)),a.walkTokens&&this.walkTokens(u,a.walkTokens);let h=c(u,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(u){return o(u)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+et(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}}const wt=new qi;function K(r,e){return wt.parse(r,e)}K.options=K.setOptions=function(r){return wt.setOptions(r),K.defaults=wt.defaults,_s(K.defaults),K};K.getDefaults=gr;K.defaults=xt;K.use=function(...r){return wt.use(...r),K.defaults=wt.defaults,_s(K.defaults),K};K.walkTokens=function(r,e){return wt.walkTokens(r,e)};K.parseInline=wt.parseInline;K.Parser=qe;K.parser=qe.parse;K.Renderer=zn;K.TextRenderer=kr;K.Lexer=We;K.lexer=We.lex;K.Tokenizer=Bn;K.Hooks=rn;K.parse=K;K.options;K.setOptions;K.use;K.walkTokens;K.parseInline;qe.parse;We.lex;/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Rs,setPrototypeOf:Ur,isFrozen:Ki,getPrototypeOf:Zi,getOwnPropertyDescriptor:Yi}=Object;let{freeze:Ne,seal:Ke,create:ys}=Object,{apply:hr,construct:pr}=typeof Reflect<"u"&&Reflect;Ne||(Ne=function(e){return e});Ke||(Ke=function(e){return e});hr||(hr=function(e,t,n){return e.apply(t,n)});pr||(pr=function(e,t){return new e(...t)});const Sn=Ie(Array.prototype.forEach),Xi=Ie(Array.prototype.lastIndexOf),jr=Ie(Array.prototype.pop),Kt=Ie(Array.prototype.push),Qi=Ie(Array.prototype.splice),Nn=Ie(String.prototype.toLowerCase),Yn=Ie(String.prototype.toString),Hr=Ie(String.prototype.match),Zt=Ie(String.prototype.replace),Vi=Ie(String.prototype.indexOf),Ji=Ie(String.prototype.trim),Xe=Ie(Object.prototype.hasOwnProperty),Oe=Ie(RegExp.prototype.test),Yt=eo(TypeError);function Ie(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return hr(r,e,n)}}function eo(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pr(r,t)}}function U(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nn;Ur&&Ur(r,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const i=t(s);i!==s&&(Ki(e)||(e[n]=i),s=i)}r[s]=!0}return r}function to(r){for(let e=0;e<r.length;e++)Xe(r,e)||(r[e]=null);return r}function _t(r){const e=ys(null);for(const[t,n]of Rs(r))Xe(r,t)&&(Array.isArray(n)?e[t]=to(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=_t(n):e[t]=n);return e}function Xt(r,e){for(;r!==null;){const n=Yi(r,e);if(n){if(n.get)return Ie(n.get);if(typeof n.value=="function")return Ie(n.value)}r=Zi(r)}function t(){return null}return t}const Fr=Ne(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xn=Ne(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qn=Ne(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),no=Ne(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vn=Ne(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ro=Ne(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Gr=Ne(["#text"]),Wr=Ne(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jn=Ne(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qr=Ne(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),An=Ne(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),so=Ke(/\{\{[\w\W]*|[\w\W]*\}\}/gm),io=Ke(/<%[\w\W]*|[\w\W]*%>/gm),oo=Ke(/\$\{[\w\W]*/gm),ao=Ke(/^data-[\-\w.\u00B7-\uFFFF]+$/),lo=Ke(/^aria-[\-\w]+$/),Os=Ke(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),co=Ke(/^(?:\w+script|data):/i),uo=Ke(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cs=Ke(/^html$/i),fo=Ke(/^[a-z][.\w]*(-[.\w]+)+$/i);var Kr=Object.freeze({__proto__:null,ARIA_ATTR:lo,ATTR_WHITESPACE:uo,CUSTOM_ELEMENT:fo,DATA_ATTR:ao,DOCTYPE_NAME:Cs,ERB_EXPR:io,IS_ALLOWED_URI:Os,IS_SCRIPT_OR_DATA:co,MUSTACHE_EXPR:so,TMPLIT_EXPR:oo});const Qt={element:1,text:3,progressingInstruction:7,comment:8,document:9},ho=function(){return typeof window>"u"?null:window},po=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Zr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ns(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ho();const e=R=>Ns(R);if(e.version="3.2.4",e.removed=[],!r||!r.document||r.document.nodeType!==Qt.document||!r.Element)return e.isSupported=!1,e;let{document:t}=r;const n=t,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:h,DOMParser:g,trustedTypes:m}=r,E=l.prototype,w=Xt(E,"cloneNode"),k=Xt(E,"remove"),L=Xt(E,"nextSibling"),$=Xt(E,"childNodes"),C=Xt(E,"parentNode");if(typeof a=="function"){const R=t.createElement("template");R.content&&R.content.ownerDocument&&(t=R.content.ownerDocument)}let M,j="";const{implementation:xe,createNodeIterator:Ee,createDocumentFragment:F,getElementsByTagName:Pe}=t,{importNode:pe}=n;let ae=Zr();e.isSupported=typeof Rs=="function"&&typeof C=="function"&&xe&&xe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ft,ERB_EXPR:Ze,TMPLIT_EXPR:$e,DATA_ATTR:Et,ARIA_ATTR:Mt,IS_SCRIPT_OR_DATA:kt,ATTR_WHITESPACE:Qe,CUSTOM_ELEMENT:W}=Kr;let{IS_ALLOWED_URI:J}=Kr,q=null;const ke=U({},[...Fr,...Xn,...Qn,...Vn,...Gr]);let le=null;const Tt=U({},[...Wr,...Jn,...qr,...An]);let N=Object.seal(ys(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Z=null,z=null,te=!0,Le=!0,Re=!1,Me=!0,Q=!1,ce=!0,ye=!1,Pt=!1,$t=!1,st=!1,vt=!1,St=!1,Dt=!0,pn=!1;const Fn="user-content-";let At=!0,De=!1,tt={},Be=null;const ht=U({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bt=null;const dn=U({},["audio","video","img","source","image","track"]);let zt=null;const gn=U({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rt="http://www.w3.org/1998/Math/MathML",yt="http://www.w3.org/2000/svg",Fe="http://www.w3.org/1999/xhtml";let it=Fe,Ut=!1,jt=null;const Ht=U({},[Rt,yt,Fe],Yn);let pt=U({},["mi","mo","mn","ms","mtext"]),dt=U({},["annotation-xml"]);const Gn=U({},["title","style","font","a","script"]);let ot=null;const at=["application/xhtml+xml","text/html"],f="text/html";let d=null,x=null;const P=t.createElement("form"),oe=function(p){return p instanceof RegExp||p instanceof Function},re=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(x&&x===p)){if((!p||typeof p!="object")&&(p={}),p=_t(p),ot=at.indexOf(p.PARSER_MEDIA_TYPE)===-1?f:p.PARSER_MEDIA_TYPE,d=ot==="application/xhtml+xml"?Yn:Nn,q=Xe(p,"ALLOWED_TAGS")?U({},p.ALLOWED_TAGS,d):ke,le=Xe(p,"ALLOWED_ATTR")?U({},p.ALLOWED_ATTR,d):Tt,jt=Xe(p,"ALLOWED_NAMESPACES")?U({},p.ALLOWED_NAMESPACES,Yn):Ht,zt=Xe(p,"ADD_URI_SAFE_ATTR")?U(_t(gn),p.ADD_URI_SAFE_ATTR,d):gn,Bt=Xe(p,"ADD_DATA_URI_TAGS")?U(_t(dn),p.ADD_DATA_URI_TAGS,d):dn,Be=Xe(p,"FORBID_CONTENTS")?U({},p.FORBID_CONTENTS,d):ht,Z=Xe(p,"FORBID_TAGS")?U({},p.FORBID_TAGS,d):{},z=Xe(p,"FORBID_ATTR")?U({},p.FORBID_ATTR,d):{},tt=Xe(p,"USE_PROFILES")?p.USE_PROFILES:!1,te=p.ALLOW_ARIA_ATTR!==!1,Le=p.ALLOW_DATA_ATTR!==!1,Re=p.ALLOW_UNKNOWN_PROTOCOLS||!1,Me=p.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Q=p.SAFE_FOR_TEMPLATES||!1,ce=p.SAFE_FOR_XML!==!1,ye=p.WHOLE_DOCUMENT||!1,st=p.RETURN_DOM||!1,vt=p.RETURN_DOM_FRAGMENT||!1,St=p.RETURN_TRUSTED_TYPE||!1,$t=p.FORCE_BODY||!1,Dt=p.SANITIZE_DOM!==!1,pn=p.SANITIZE_NAMED_PROPS||!1,At=p.KEEP_CONTENT!==!1,De=p.IN_PLACE||!1,J=p.ALLOWED_URI_REGEXP||Os,it=p.NAMESPACE||Fe,pt=p.MATHML_TEXT_INTEGRATION_POINTS||pt,dt=p.HTML_INTEGRATION_POINTS||dt,N=p.CUSTOM_ELEMENT_HANDLING||{},p.CUSTOM_ELEMENT_HANDLING&&oe(p.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(N.tagNameCheck=p.CUSTOM_ELEMENT_HANDLING.tagNameCheck),p.CUSTOM_ELEMENT_HANDLING&&oe(p.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(N.attributeNameCheck=p.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),p.CUSTOM_ELEMENT_HANDLING&&typeof p.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(N.allowCustomizedBuiltInElements=p.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Q&&(Le=!1),vt&&(st=!0),tt&&(q=U({},Gr),le=[],tt.html===!0&&(U(q,Fr),U(le,Wr)),tt.svg===!0&&(U(q,Xn),U(le,Jn),U(le,An)),tt.svgFilters===!0&&(U(q,Qn),U(le,Jn),U(le,An)),tt.mathMl===!0&&(U(q,Vn),U(le,qr),U(le,An))),p.ADD_TAGS&&(q===ke&&(q=_t(q)),U(q,p.ADD_TAGS,d)),p.ADD_ATTR&&(le===Tt&&(le=_t(le)),U(le,p.ADD_ATTR,d)),p.ADD_URI_SAFE_ATTR&&U(zt,p.ADD_URI_SAFE_ATTR,d),p.FORBID_CONTENTS&&(Be===ht&&(Be=_t(Be)),U(Be,p.FORBID_CONTENTS,d)),At&&(q["#text"]=!0),ye&&U(q,["html","head","body"]),q.table&&(U(q,["tbody"]),delete Z.tbody),p.TRUSTED_TYPES_POLICY){if(typeof p.TRUSTED_TYPES_POLICY.createHTML!="function")throw Yt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof p.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Yt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');M=p.TRUSTED_TYPES_POLICY,j=M.createHTML("")}else M===void 0&&(M=po(m,s)),M!==null&&typeof j=="string"&&(j=M.createHTML(""));Ne&&Ne(p),x=p}},S=U({},[...Xn,...Qn,...no]),v=U({},[...Vn,...ro]),I=function(p){let b=C(p);(!b||!b.tagName)&&(b={namespaceURI:it,tagName:"template"});const A=Nn(p.tagName),G=Nn(b.tagName);return jt[p.namespaceURI]?p.namespaceURI===yt?b.namespaceURI===Fe?A==="svg":b.namespaceURI===Rt?A==="svg"&&(G==="annotation-xml"||pt[G]):!!S[A]:p.namespaceURI===Rt?b.namespaceURI===Fe?A==="math":b.namespaceURI===yt?A==="math"&&dt[G]:!!v[A]:p.namespaceURI===Fe?b.namespaceURI===yt&&!dt[G]||b.namespaceURI===Rt&&!pt[G]?!1:!v[A]&&(Gn[A]||!S[A]):!!(ot==="application/xhtml+xml"&&jt[p.namespaceURI]):!1},Y=function(p){Kt(e.removed,{element:p});try{C(p).removeChild(p)}catch{k(p)}},se=function(p,b){try{Kt(e.removed,{attribute:b.getAttributeNode(p),from:b})}catch{Kt(e.removed,{attribute:null,from:b})}if(b.removeAttribute(p),p==="is")if(st||vt)try{Y(b)}catch{}else try{b.setAttribute(p,"")}catch{}},lt=function(p){let b=null,A=null;if($t)p="<remove></remove>"+p;else{const ue=Hr(p,/^[\r\n\t ]+/);A=ue&&ue[0]}ot==="application/xhtml+xml"&&it===Fe&&(p='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+p+"</body></html>");const G=M?M.createHTML(p):p;if(it===Fe)try{b=new g().parseFromString(G,ot)}catch{}if(!b||!b.documentElement){b=xe.createDocument(it,"template",null);try{b.documentElement.innerHTML=Ut?j:G}catch{}}const de=b.body||b.documentElement;return p&&A&&de.insertBefore(t.createTextNode(A),de.childNodes[0]||null),it===Fe?Pe.call(b,ye?"html":"body")[0]:ye?b.documentElement:de},Ot=function(p){return Ee.call(p.ownerDocument||p,p,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},gt=function(p){return p instanceof h&&(typeof p.nodeName!="string"||typeof p.textContent!="string"||typeof p.removeChild!="function"||!(p.attributes instanceof u)||typeof p.removeAttribute!="function"||typeof p.setAttribute!="function"||typeof p.namespaceURI!="string"||typeof p.insertBefore!="function"||typeof p.hasChildNodes!="function")},mn=function(p){return typeof o=="function"&&p instanceof o};function ze(R,p,b){Sn(R,A=>{A.call(e,p,b,x)})}const bn=function(p){let b=null;if(ze(ae.beforeSanitizeElements,p,null),gt(p))return Y(p),!0;const A=d(p.nodeName);if(ze(ae.uponSanitizeElement,p,{tagName:A,allowedTags:q}),p.hasChildNodes()&&!mn(p.firstElementChild)&&Oe(/<[/\w]/g,p.innerHTML)&&Oe(/<[/\w]/g,p.textContent)||p.nodeType===Qt.progressingInstruction||ce&&p.nodeType===Qt.comment&&Oe(/<[/\w]/g,p.data))return Y(p),!0;if(!q[A]||Z[A]){if(!Z[A]&&wn(A)&&(N.tagNameCheck instanceof RegExp&&Oe(N.tagNameCheck,A)||N.tagNameCheck instanceof Function&&N.tagNameCheck(A)))return!1;if(At&&!Be[A]){const G=C(p)||p.parentNode,de=$(p)||p.childNodes;if(de&&G){const ue=de.length;for(let Te=ue-1;Te>=0;--Te){const Ge=w(de[Te],!0);Ge.__removalCount=(p.__removalCount||0)+1,G.insertBefore(Ge,L(p))}}}return Y(p),!0}return p instanceof l&&!I(p)||(A==="noscript"||A==="noembed"||A==="noframes")&&Oe(/<\/no(script|embed|frames)/i,p.innerHTML)?(Y(p),!0):(Q&&p.nodeType===Qt.text&&(b=p.textContent,Sn([ft,Ze,$e],G=>{b=Zt(b,G," ")}),p.textContent!==b&&(Kt(e.removed,{element:p.cloneNode()}),p.textContent=b)),ze(ae.afterSanitizeElements,p,null),!1)},_n=function(p,b,A){if(Dt&&(b==="id"||b==="name")&&(A in t||A in P))return!1;if(!(Le&&!z[b]&&Oe(Et,b))){if(!(te&&Oe(Mt,b))){if(!le[b]||z[b]){if(!(wn(p)&&(N.tagNameCheck instanceof RegExp&&Oe(N.tagNameCheck,p)||N.tagNameCheck instanceof Function&&N.tagNameCheck(p))&&(N.attributeNameCheck instanceof RegExp&&Oe(N.attributeNameCheck,b)||N.attributeNameCheck instanceof Function&&N.attributeNameCheck(b))||b==="is"&&N.allowCustomizedBuiltInElements&&(N.tagNameCheck instanceof RegExp&&Oe(N.tagNameCheck,A)||N.tagNameCheck instanceof Function&&N.tagNameCheck(A))))return!1}else if(!zt[b]){if(!Oe(J,Zt(A,Qe,""))){if(!((b==="src"||b==="xlink:href"||b==="href")&&p!=="script"&&Vi(A,"data:")===0&&Bt[p])){if(!(Re&&!Oe(kt,Zt(A,Qe,"")))){if(A)return!1}}}}}}return!0},wn=function(p){return p!=="annotation-xml"&&Hr(p,W)},Ft=function(p){ze(ae.beforeSanitizeAttributes,p,null);const{attributes:b}=p;if(!b||gt(p))return;const A={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le,forceKeepAttr:void 0};let G=b.length;for(;G--;){const de=b[G],{name:ue,namespaceURI:Te,value:Ge}=de,mt=d(ue);let fe=ue==="value"?Ge:Ji(Ge);if(A.attrName=mt,A.attrValue=fe,A.keepAttr=!0,A.forceKeepAttr=void 0,ze(ae.uponSanitizeAttribute,p,A),fe=A.attrValue,pn&&(mt==="id"||mt==="name")&&(se(ue,p),fe=Fn+fe),ce&&Oe(/((--!?|])>)|<\/(style|title)/i,fe)){se(ue,p);continue}if(A.forceKeepAttr||(se(ue,p),!A.keepAttr))continue;if(!Me&&Oe(/\/>/i,fe)){se(ue,p);continue}Q&&Sn([ft,Ze,$e],_=>{fe=Zt(fe,_," ")});const xn=d(p.nodeName);if(_n(xn,mt,fe)){if(M&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Te)switch(m.getAttributeType(xn,mt)){case"TrustedHTML":{fe=M.createHTML(fe);break}case"TrustedScriptURL":{fe=M.createScriptURL(fe);break}}try{Te?p.setAttributeNS(Te,ue,fe):p.setAttribute(ue,fe),gt(p)?Y(p):jr(e.removed)}catch{}}}ze(ae.afterSanitizeAttributes,p,null)},Ct=function R(p){let b=null;const A=Ot(p);for(ze(ae.beforeSanitizeShadowDOM,p,null);b=A.nextNode();)ze(ae.uponSanitizeShadowNode,b,null),bn(b),Ft(b),b.content instanceof i&&R(b.content);ze(ae.afterSanitizeShadowDOM,p,null)};return e.sanitize=function(R){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=null,A=null,G=null,de=null;if(Ut=!R,Ut&&(R="<!-->"),typeof R!="string"&&!mn(R))if(typeof R.toString=="function"){if(R=R.toString(),typeof R!="string")throw Yt("dirty is not a string, aborting")}else throw Yt("toString is not a function");if(!e.isSupported)return R;if(Pt||re(p),e.removed=[],typeof R=="string"&&(De=!1),De){if(R.nodeName){const Ge=d(R.nodeName);if(!q[Ge]||Z[Ge])throw Yt("root node is forbidden and cannot be sanitized in-place")}}else if(R instanceof o)b=lt("<!---->"),A=b.ownerDocument.importNode(R,!0),A.nodeType===Qt.element&&A.nodeName==="BODY"||A.nodeName==="HTML"?b=A:b.appendChild(A);else{if(!st&&!Q&&!ye&&R.indexOf("<")===-1)return M&&St?M.createHTML(R):R;if(b=lt(R),!b)return st?null:St?j:""}b&&$t&&Y(b.firstChild);const ue=Ot(De?R:b);for(;G=ue.nextNode();)bn(G),Ft(G),G.content instanceof i&&Ct(G.content);if(De)return R;if(st){if(vt)for(de=F.call(b.ownerDocument);b.firstChild;)de.appendChild(b.firstChild);else de=b;return(le.shadowroot||le.shadowrootmode)&&(de=pe.call(n,de,!0)),de}let Te=ye?b.outerHTML:b.innerHTML;return ye&&q["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&Oe(Cs,b.ownerDocument.doctype.name)&&(Te="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+Te),Q&&Sn([ft,Ze,$e],Ge=>{Te=Zt(Te,Ge," ")}),M&&St?M.createHTML(Te):Te},e.setConfig=function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re(R),Pt=!0},e.clearConfig=function(){x=null,Pt=!1},e.isValidAttribute=function(R,p,b){x||re({});const A=d(R),G=d(p);return _n(A,G,b)},e.addHook=function(R,p){typeof p=="function"&&Kt(ae[R],p)},e.removeHook=function(R,p){if(p!==void 0){const b=Xi(ae[R],p);return b===-1?void 0:Qi(ae[R],b,1)[0]}return jr(ae[R])},e.removeHooks=function(R){ae[R]=[]},e.removeAllHooks=function(){ae=Zr()},e}var er=Ns();function Tr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tr,Yr;function go(){if(Yr)return tr;Yr=1;function r(f){return f instanceof Map?f.clear=f.delete=f.set=function(){throw new Error("map is read-only")}:f instanceof Set&&(f.add=f.clear=f.delete=function(){throw new Error("set is read-only")}),Object.freeze(f),Object.getOwnPropertyNames(f).forEach(d=>{const x=f[d],P=typeof x;(P==="object"||P==="function")&&!Object.isFrozen(x)&&r(x)}),f}class e{constructor(d){d.data===void 0&&(d.data={}),this.data=d.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(f,...d){const x=Object.create(null);for(const P in f)x[P]=f[P];return d.forEach(function(P){for(const oe in P)x[oe]=P[oe]}),x}const s="</span>",i=f=>!!f.scope,a=(f,{prefix:d})=>{if(f.startsWith("language:"))return f.replace("language:","language-");if(f.includes(".")){const x=f.split(".");return[`${d}${x.shift()}`,...x.map((P,oe)=>`${P}${"_".repeat(oe+1)}`)].join(" ")}return`${d}${f}`};class o{constructor(d,x){this.buffer="",this.classPrefix=x.classPrefix,d.walk(this)}addText(d){this.buffer+=t(d)}openNode(d){if(!i(d))return;const x=a(d.scope,{prefix:this.classPrefix});this.span(x)}closeNode(d){i(d)&&(this.buffer+=s)}value(){return this.buffer}span(d){this.buffer+=`<span class="${d}">`}}const l=(f={})=>{const d={children:[]};return Object.assign(d,f),d};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(d){this.top.children.push(d)}openNode(d){const x=l({scope:d});this.add(x),this.stack.push(x)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(d){return this.constructor._walk(d,this.rootNode)}static _walk(d,x){return typeof x=="string"?d.addText(x):x.children&&(d.openNode(x),x.children.forEach(P=>this._walk(d,P)),d.closeNode(x)),d}static _collapse(d){typeof d!="string"&&d.children&&(d.children.every(x=>typeof x=="string")?d.children=[d.children.join("")]:d.children.forEach(x=>{c._collapse(x)}))}}class u extends c{constructor(d){super(),this.options=d}addText(d){d!==""&&this.add(d)}startScope(d){this.openNode(d)}endScope(){this.closeNode()}__addSublanguage(d,x){const P=d.root;x&&(P.scope=`language:${x}`),this.add(P)}toHTML(){return new o(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function h(f){return f?typeof f=="string"?f:f.source:null}function g(f){return w("(?=",f,")")}function m(f){return w("(?:",f,")*")}function E(f){return w("(?:",f,")?")}function w(...f){return f.map(x=>h(x)).join("")}function k(f){const d=f[f.length-1];return typeof d=="object"&&d.constructor===Object?(f.splice(f.length-1,1),d):{}}function L(...f){return"("+(k(f).capture?"":"?:")+f.map(P=>h(P)).join("|")+")"}function $(f){return new RegExp(f.toString()+"|").exec("").length-1}function C(f,d){const x=f&&f.exec(d);return x&&x.index===0}const M=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function j(f,{joinWith:d}){let x=0;return f.map(P=>{x+=1;const oe=x;let re=h(P),S="";for(;re.length>0;){const v=M.exec(re);if(!v){S+=re;break}S+=re.substring(0,v.index),re=re.substring(v.index+v[0].length),v[0][0]==="\\"&&v[1]?S+="\\"+String(Number(v[1])+oe):(S+=v[0],v[0]==="("&&x++)}return S}).map(P=>`(${P})`).join(d)}const xe=/\b\B/,Ee="[a-zA-Z]\\w*",F="[a-zA-Z_]\\w*",Pe="\\b\\d+(\\.\\d+)?",pe="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ae="\\b(0b[01]+)",ft="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Ze=(f={})=>{const d=/^#![ ]*\//;return f.binary&&(f.begin=w(d,/.*\b/,f.binary,/\b.*/)),n({scope:"meta",begin:d,end:/$/,relevance:0,"on:begin":(x,P)=>{x.index!==0&&P.ignoreMatch()}},f)},$e={begin:"\\\\[\\s\\S]",relevance:0},Et={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[$e]},Mt={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[$e]},kt={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Qe=function(f,d,x={}){const P=n({scope:"comment",begin:f,end:d,contains:[]},x);P.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const oe=L("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return P.contains.push({begin:w(/[ ]+/,"(",oe,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),P},W=Qe("//","$"),J=Qe("/\\*","\\*/"),q=Qe("#","$"),ke={scope:"number",begin:Pe,relevance:0},le={scope:"number",begin:pe,relevance:0},Tt={scope:"number",begin:ae,relevance:0},N={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[$e,{begin:/\[/,end:/\]/,relevance:0,contains:[$e]}]},Z={scope:"title",begin:Ee,relevance:0},z={scope:"title",begin:F,relevance:0},te={begin:"\\.\\s*"+F,relevance:0};var Re=Object.freeze({__proto__:null,APOS_STRING_MODE:Et,BACKSLASH_ESCAPE:$e,BINARY_NUMBER_MODE:Tt,BINARY_NUMBER_RE:ae,COMMENT:Qe,C_BLOCK_COMMENT_MODE:J,C_LINE_COMMENT_MODE:W,C_NUMBER_MODE:le,C_NUMBER_RE:pe,END_SAME_AS_BEGIN:function(f){return Object.assign(f,{"on:begin":(d,x)=>{x.data._beginMatch=d[1]},"on:end":(d,x)=>{x.data._beginMatch!==d[1]&&x.ignoreMatch()}})},HASH_COMMENT_MODE:q,IDENT_RE:Ee,MATCH_NOTHING_RE:xe,METHOD_GUARD:te,NUMBER_MODE:ke,NUMBER_RE:Pe,PHRASAL_WORDS_MODE:kt,QUOTE_STRING_MODE:Mt,REGEXP_MODE:N,RE_STARTERS_RE:ft,SHEBANG:Ze,TITLE_MODE:Z,UNDERSCORE_IDENT_RE:F,UNDERSCORE_TITLE_MODE:z});function Me(f,d){f.input[f.index-1]==="."&&d.ignoreMatch()}function Q(f,d){f.className!==void 0&&(f.scope=f.className,delete f.className)}function ce(f,d){d&&f.beginKeywords&&(f.begin="\\b("+f.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",f.__beforeBegin=Me,f.keywords=f.keywords||f.beginKeywords,delete f.beginKeywords,f.relevance===void 0&&(f.relevance=0))}function ye(f,d){Array.isArray(f.illegal)&&(f.illegal=L(...f.illegal))}function Pt(f,d){if(f.match){if(f.begin||f.end)throw new Error("begin & end are not supported with match");f.begin=f.match,delete f.match}}function $t(f,d){f.relevance===void 0&&(f.relevance=1)}const st=(f,d)=>{if(!f.beforeMatch)return;if(f.starts)throw new Error("beforeMatch cannot be used with starts");const x=Object.assign({},f);Object.keys(f).forEach(P=>{delete f[P]}),f.keywords=x.keywords,f.begin=w(x.beforeMatch,g(x.begin)),f.starts={relevance:0,contains:[Object.assign(x,{endsParent:!0})]},f.relevance=0,delete x.beforeMatch},vt=["of","and","for","in","not","or","if","then","parent","list","value"],St="keyword";function Dt(f,d,x=St){const P=Object.create(null);return typeof f=="string"?oe(x,f.split(" ")):Array.isArray(f)?oe(x,f):Object.keys(f).forEach(function(re){Object.assign(P,Dt(f[re],d,re))}),P;function oe(re,S){d&&(S=S.map(v=>v.toLowerCase())),S.forEach(function(v){const I=v.split("|");P[I[0]]=[re,pn(I[0],I[1])]})}}function pn(f,d){return d?Number(d):Fn(f)?0:1}function Fn(f){return vt.includes(f.toLowerCase())}const At={},De=f=>{console.error(f)},tt=(f,...d)=>{console.log(`WARN: ${f}`,...d)},Be=(f,d)=>{At[`${f}/${d}`]||(console.log(`Deprecated as of ${f}. ${d}`),At[`${f}/${d}`]=!0)},ht=new Error;function Bt(f,d,{key:x}){let P=0;const oe=f[x],re={},S={};for(let v=1;v<=d.length;v++)S[v+P]=oe[v],re[v+P]=!0,P+=$(d[v-1]);f[x]=S,f[x]._emit=re,f[x]._multi=!0}function dn(f){if(Array.isArray(f.begin)){if(f.skip||f.excludeBegin||f.returnBegin)throw De("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ht;if(typeof f.beginScope!="object"||f.beginScope===null)throw De("beginScope must be object"),ht;Bt(f,f.begin,{key:"beginScope"}),f.begin=j(f.begin,{joinWith:""})}}function zt(f){if(Array.isArray(f.end)){if(f.skip||f.excludeEnd||f.returnEnd)throw De("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ht;if(typeof f.endScope!="object"||f.endScope===null)throw De("endScope must be object"),ht;Bt(f,f.end,{key:"endScope"}),f.end=j(f.end,{joinWith:""})}}function gn(f){f.scope&&typeof f.scope=="object"&&f.scope!==null&&(f.beginScope=f.scope,delete f.scope)}function Rt(f){gn(f),typeof f.beginScope=="string"&&(f.beginScope={_wrap:f.beginScope}),typeof f.endScope=="string"&&(f.endScope={_wrap:f.endScope}),dn(f),zt(f)}function yt(f){function d(S,v){return new RegExp(h(S),"m"+(f.case_insensitive?"i":"")+(f.unicodeRegex?"u":"")+(v?"g":""))}class x{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(v,I){I.position=this.position++,this.matchIndexes[this.matchAt]=I,this.regexes.push([I,v]),this.matchAt+=$(v)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const v=this.regexes.map(I=>I[1]);this.matcherRe=d(j(v,{joinWith:"|"}),!0),this.lastIndex=0}exec(v){this.matcherRe.lastIndex=this.lastIndex;const I=this.matcherRe.exec(v);if(!I)return null;const Y=I.findIndex((lt,Ot)=>Ot>0&&lt!==void 0),se=this.matchIndexes[Y];return I.splice(0,Y),Object.assign(I,se)}}class P{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(v){if(this.multiRegexes[v])return this.multiRegexes[v];const I=new x;return this.rules.slice(v).forEach(([Y,se])=>I.addRule(Y,se)),I.compile(),this.multiRegexes[v]=I,I}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(v,I){this.rules.push([v,I]),I.type==="begin"&&this.count++}exec(v){const I=this.getMatcher(this.regexIndex);I.lastIndex=this.lastIndex;let Y=I.exec(v);if(this.resumingScanAtSamePosition()&&!(Y&&Y.index===this.lastIndex)){const se=this.getMatcher(0);se.lastIndex=this.lastIndex+1,Y=se.exec(v)}return Y&&(this.regexIndex+=Y.position+1,this.regexIndex===this.count&&this.considerAll()),Y}}function oe(S){const v=new P;return S.contains.forEach(I=>v.addRule(I.begin,{rule:I,type:"begin"})),S.terminatorEnd&&v.addRule(S.terminatorEnd,{type:"end"}),S.illegal&&v.addRule(S.illegal,{type:"illegal"}),v}function re(S,v){const I=S;if(S.isCompiled)return I;[Q,Pt,Rt,st].forEach(se=>se(S,v)),f.compilerExtensions.forEach(se=>se(S,v)),S.__beforeBegin=null,[ce,ye,$t].forEach(se=>se(S,v)),S.isCompiled=!0;let Y=null;return typeof S.keywords=="object"&&S.keywords.$pattern&&(S.keywords=Object.assign({},S.keywords),Y=S.keywords.$pattern,delete S.keywords.$pattern),Y=Y||/\w+/,S.keywords&&(S.keywords=Dt(S.keywords,f.case_insensitive)),I.keywordPatternRe=d(Y,!0),v&&(S.begin||(S.begin=/\B|\b/),I.beginRe=d(I.begin),!S.end&&!S.endsWithParent&&(S.end=/\B|\b/),S.end&&(I.endRe=d(I.end)),I.terminatorEnd=h(I.end)||"",S.endsWithParent&&v.terminatorEnd&&(I.terminatorEnd+=(S.end?"|":"")+v.terminatorEnd)),S.illegal&&(I.illegalRe=d(S.illegal)),S.contains||(S.contains=[]),S.contains=[].concat(...S.contains.map(function(se){return it(se==="self"?S:se)})),S.contains.forEach(function(se){re(se,I)}),S.starts&&re(S.starts,v),I.matcher=oe(I),I}if(f.compilerExtensions||(f.compilerExtensions=[]),f.contains&&f.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return f.classNameAliases=n(f.classNameAliases||{}),re(f)}function Fe(f){return f?f.endsWithParent||Fe(f.starts):!1}function it(f){return f.variants&&!f.cachedVariants&&(f.cachedVariants=f.variants.map(function(d){return n(f,{variants:null},d)})),f.cachedVariants?f.cachedVariants:Fe(f)?n(f,{starts:f.starts?n(f.starts):null}):Object.isFrozen(f)?n(f):f}var Ut="11.10.0";class jt extends Error{constructor(d,x){super(d),this.name="HTMLInjectionError",this.html=x}}const Ht=t,pt=n,dt=Symbol("nomatch"),Gn=7,ot=function(f){const d=Object.create(null),x=Object.create(null),P=[];let oe=!0;const re="Could not find the language '{}', did you forget to load/include a language module?",S={disableAutodetect:!0,name:"Plain text",contains:[]};let v={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function I(_){return v.noHighlightRe.test(_)}function Y(_){let O=_.className+" ";O+=_.parentNode?_.parentNode.className:"";const H=v.languageDetectRe.exec(O);if(H){const ne=G(H[1]);return ne||(tt(re.replace("{}",H[1])),tt("Falling back to no-highlight mode for this block.",_)),ne?H[1]:"no-highlight"}return O.split(/\s+/).find(ne=>I(ne)||G(ne))}function se(_,O,H){let ne="",ge="";typeof O=="object"?(ne=_,H=O.ignoreIllegals,ge=O.language):(Be("10.7.0","highlight(lang, code, ...args) has been deprecated."),Be("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ge=_,ne=O),H===void 0&&(H=!0);const Ye={code:ne,language:ge};fe("before:highlight",Ye);const ct=Ye.result?Ye.result:lt(Ye.language,Ye.code,H);return ct.code=Ye.code,fe("after:highlight",ct),ct}function lt(_,O,H,ne){const ge=Object.create(null);function Ye(T,y){return T.keywords[y]}function ct(){if(!D.keywords){we.addText(ie);return}let T=0;D.keywordPatternRe.lastIndex=0;let y=D.keywordPatternRe.exec(ie),B="";for(;y;){B+=ie.substring(T,y.index);const X=Je.case_insensitive?y[0].toLowerCase():y[0],ve=Ye(D,X);if(ve){const[nt,zs]=ve;if(we.addText(B),B="",ge[X]=(ge[X]||0)+1,ge[X]<=Gn&&(Tn+=zs),nt.startsWith("_"))B+=y[0];else{const Us=Je.classNameAliases[nt]||nt;Ve(y[0],Us)}}else B+=y[0];T=D.keywordPatternRe.lastIndex,y=D.keywordPatternRe.exec(ie)}B+=ie.substring(T),we.addText(B)}function En(){if(ie==="")return;let T=null;if(typeof D.subLanguage=="string"){if(!d[D.subLanguage]){we.addText(ie);return}T=lt(D.subLanguage,ie,!0,yr[D.subLanguage]),yr[D.subLanguage]=T._top}else T=gt(ie,D.subLanguage.length?D.subLanguage:null);D.relevance>0&&(Tn+=T.relevance),we.__addSublanguage(T._emitter,T.language)}function Ue(){D.subLanguage!=null?En():ct(),ie=""}function Ve(T,y){T!==""&&(we.startScope(y),we.addText(T),we.endScope())}function vr(T,y){let B=1;const X=y.length-1;for(;B<=X;){if(!T._emit[B]){B++;continue}const ve=Je.classNameAliases[T[B]]||T[B],nt=y[B];ve?Ve(nt,ve):(ie=nt,ct(),ie=""),B++}}function Sr(T,y){return T.scope&&typeof T.scope=="string"&&we.openNode(Je.classNameAliases[T.scope]||T.scope),T.beginScope&&(T.beginScope._wrap?(Ve(ie,Je.classNameAliases[T.beginScope._wrap]||T.beginScope._wrap),ie=""):T.beginScope._multi&&(vr(T.beginScope,y),ie="")),D=Object.create(T,{parent:{value:D}}),D}function Ar(T,y,B){let X=C(T.endRe,B);if(X){if(T["on:end"]){const ve=new e(T);T["on:end"](y,ve),ve.isMatchIgnored&&(X=!1)}if(X){for(;T.endsParent&&T.parent;)T=T.parent;return T}}if(T.endsWithParent)return Ar(T.parent,y,B)}function Ms(T){return D.matcher.regexIndex===0?(ie+=T[0],1):(Kn=!0,0)}function Ps(T){const y=T[0],B=T.rule,X=new e(B),ve=[B.__beforeBegin,B["on:begin"]];for(const nt of ve)if(nt&&(nt(T,X),X.isMatchIgnored))return Ms(y);return B.skip?ie+=y:(B.excludeBegin&&(ie+=y),Ue(),!B.returnBegin&&!B.excludeBegin&&(ie=y)),Sr(B,T),B.returnBegin?0:y.length}function $s(T){const y=T[0],B=O.substring(T.index),X=Ar(D,T,B);if(!X)return dt;const ve=D;D.endScope&&D.endScope._wrap?(Ue(),Ve(y,D.endScope._wrap)):D.endScope&&D.endScope._multi?(Ue(),vr(D.endScope,T)):ve.skip?ie+=y:(ve.returnEnd||ve.excludeEnd||(ie+=y),Ue(),ve.excludeEnd&&(ie=y));do D.scope&&we.closeNode(),!D.skip&&!D.subLanguage&&(Tn+=D.relevance),D=D.parent;while(D!==X.parent);return X.starts&&Sr(X.starts,T),ve.returnEnd?0:y.length}function Ds(){const T=[];for(let y=D;y!==Je;y=y.parent)y.scope&&T.unshift(y.scope);T.forEach(y=>we.openNode(y))}let kn={};function Rr(T,y){const B=y&&y[0];if(ie+=T,B==null)return Ue(),0;if(kn.type==="begin"&&y.type==="end"&&kn.index===y.index&&B===""){if(ie+=O.slice(y.index,y.index+1),!oe){const X=new Error(`0 width match regex (${_})`);throw X.languageName=_,X.badRule=kn.rule,X}return 1}if(kn=y,y.type==="begin")return Ps(y);if(y.type==="illegal"&&!H){const X=new Error('Illegal lexeme "'+B+'" for mode "'+(D.scope||"<unnamed>")+'"');throw X.mode=D,X}else if(y.type==="end"){const X=$s(y);if(X!==dt)return X}if(y.type==="illegal"&&B==="")return 1;if(qn>1e5&&qn>y.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ie+=B,B.length}const Je=G(_);if(!Je)throw De(re.replace("{}",_)),new Error('Unknown language: "'+_+'"');const Bs=yt(Je);let Wn="",D=ne||Bs;const yr={},we=new v.__emitter(v);Ds();let ie="",Tn=0,bt=0,qn=0,Kn=!1;try{if(Je.__emitTokens)Je.__emitTokens(O,we);else{for(D.matcher.considerAll();;){qn++,Kn?Kn=!1:D.matcher.considerAll(),D.matcher.lastIndex=bt;const T=D.matcher.exec(O);if(!T)break;const y=O.substring(bt,T.index),B=Rr(y,T);bt=T.index+B}Rr(O.substring(bt))}return we.finalize(),Wn=we.toHTML(),{language:_,value:Wn,relevance:Tn,illegal:!1,_emitter:we,_top:D}}catch(T){if(T.message&&T.message.includes("Illegal"))return{language:_,value:Ht(O),illegal:!0,relevance:0,_illegalBy:{message:T.message,index:bt,context:O.slice(bt-100,bt+100),mode:T.mode,resultSoFar:Wn},_emitter:we};if(oe)return{language:_,value:Ht(O),illegal:!1,relevance:0,errorRaised:T,_emitter:we,_top:D};throw T}}function Ot(_){const O={value:Ht(_),illegal:!1,relevance:0,_top:S,_emitter:new v.__emitter(v)};return O._emitter.addText(_),O}function gt(_,O){O=O||v.languages||Object.keys(d);const H=Ot(_),ne=O.filter(G).filter(ue).map(Ue=>lt(Ue,_,!1));ne.unshift(H);const ge=ne.sort((Ue,Ve)=>{if(Ue.relevance!==Ve.relevance)return Ve.relevance-Ue.relevance;if(Ue.language&&Ve.language){if(G(Ue.language).supersetOf===Ve.language)return 1;if(G(Ve.language).supersetOf===Ue.language)return-1}return 0}),[Ye,ct]=ge,En=Ye;return En.secondBest=ct,En}function mn(_,O,H){const ne=O&&x[O]||H;_.classList.add("hljs"),_.classList.add(`language-${ne}`)}function ze(_){let O=null;const H=Y(_);if(I(H))return;if(fe("before:highlightElement",{el:_,language:H}),_.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",_);return}if(_.children.length>0&&(v.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(_)),v.throwUnescapedHTML))throw new jt("One of your code blocks includes unescaped HTML.",_.innerHTML);O=_;const ne=O.textContent,ge=H?se(ne,{language:H,ignoreIllegals:!0}):gt(ne);_.innerHTML=ge.value,_.dataset.highlighted="yes",mn(_,H,ge.language),_.result={language:ge.language,re:ge.relevance,relevance:ge.relevance},ge.secondBest&&(_.secondBest={language:ge.secondBest.language,relevance:ge.secondBest.relevance}),fe("after:highlightElement",{el:_,result:ge,text:ne})}function bn(_){v=pt(v,_)}const _n=()=>{Ct(),Be("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function wn(){Ct(),Be("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ft=!1;function Ct(){if(document.readyState==="loading"){Ft=!0;return}document.querySelectorAll(v.cssSelector).forEach(ze)}function R(){Ft&&Ct()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",R,!1);function p(_,O){let H=null;try{H=O(f)}catch(ne){if(De("Language definition for '{}' could not be registered.".replace("{}",_)),oe)De(ne);else throw ne;H=S}H.name||(H.name=_),d[_]=H,H.rawDefinition=O.bind(null,f),H.aliases&&de(H.aliases,{languageName:_})}function b(_){delete d[_];for(const O of Object.keys(x))x[O]===_&&delete x[O]}function A(){return Object.keys(d)}function G(_){return _=(_||"").toLowerCase(),d[_]||d[x[_]]}function de(_,{languageName:O}){typeof _=="string"&&(_=[_]),_.forEach(H=>{x[H.toLowerCase()]=O})}function ue(_){const O=G(_);return O&&!O.disableAutodetect}function Te(_){_["before:highlightBlock"]&&!_["before:highlightElement"]&&(_["before:highlightElement"]=O=>{_["before:highlightBlock"](Object.assign({block:O.el},O))}),_["after:highlightBlock"]&&!_["after:highlightElement"]&&(_["after:highlightElement"]=O=>{_["after:highlightBlock"](Object.assign({block:O.el},O))})}function Ge(_){Te(_),P.push(_)}function mt(_){const O=P.indexOf(_);O!==-1&&P.splice(O,1)}function fe(_,O){const H=_;P.forEach(function(ne){ne[H]&&ne[H](O)})}function xn(_){return Be("10.7.0","highlightBlock will be removed entirely in v12.0"),Be("10.7.0","Please use highlightElement now."),ze(_)}Object.assign(f,{highlight:se,highlightAuto:gt,highlightAll:Ct,highlightElement:ze,highlightBlock:xn,configure:bn,initHighlighting:_n,initHighlightingOnLoad:wn,registerLanguage:p,unregisterLanguage:b,listLanguages:A,getLanguage:G,registerAliases:de,autoDetection:ue,inherit:pt,addPlugin:Ge,removePlugin:mt}),f.debugMode=function(){oe=!1},f.safeMode=function(){oe=!0},f.versionString=Ut,f.regex={concat:w,lookahead:g,either:L,optional:E,anyNumberOfTimes:m};for(const _ in Re)typeof Re[_]=="object"&&r(Re[_]);return Object.assign(f,Re),f},at=ot({});return at.newInstance=()=>ot({}),tr=at,at.HighlightJS=at,at.default=at,tr}var mo=go();const nr=Tr(mo),bo={label:"Run or edit the query",title:"Open the SPARQL query in an editor in a new tab"};function _o(r,e=""){return`https://sib-swiss.github.io/sparql-editor/?${e?`endpoint=${e}&`:""}query=${encodeURIComponent(r)}`}const wo=`chat-with-context {
  button:hover {
    filter: brightness(90%);
  }
}
.iconBtn {
  filter: invert(44%) sepia(22%) saturate(496%) hue-rotate(176deg) brightness(93%) contrast(79%);
}`;function xo(r){var e={keyword:"base|10 prefix|10 @base|10 @prefix|10",literal:"true|0 false|0",built_in:"a|0"},t={className:"literal",relevance:1,begin:/</,end:/>/,illegal:/[^\x00-\x20<>"{}|^`]/},n="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F",s=n+"_",i="-"+s+"0-9·̀-ͯ‿-⁀",a="_:["+s+"0-9](["+i+".]*["+i+"])?",o="["+n+"](["+i+".]*["+i+"])?",l="%[0-9A-Fa-f][0-9A-Fa-f]",c="\\\\[_~.!$&'()*+,;=/?#@%-]",u=l+"|"+c,h="("+o+")?:",g="(["+s+":0-9]|"+u+")(["+i+".:]|"+u+")*(["+i+":]|"+u+")?",m=h+g,E=h+"("+g+")?",w={begin:E,relevance:0,className:"symbol"},k={begin:a,relevance:10,className:"template-variable"},L={begin:/@[a-zA-Z]+([a-zA-Z0-9-]+)*/,className:"type",relevance:5},$={begin:"\\^\\^"+m,className:"type",relevance:10},C={begin:/'''/,end:/'''/,className:"string",relevance:0},M={begin:/"""/,end:/"""/,className:"string",relevance:0},j=JSON.parse(JSON.stringify(r.APOS_STRING_MODE));j.relevance=0;var xe=JSON.parse(JSON.stringify(r.QUOTE_STRING_MODE));xe.relevance=0;var Ee=JSON.parse(JSON.stringify(r.C_NUMBER_MODE));return Ee.relevance=0,{case_insensitive:!0,keywords:e,aliases:["turtle","ttl","n3","ntriples","shex","trig"],contains:[L,$,t,k,w,C,M,j,xe,Ee,r.HASH_COMMENT_MODE],exports:{LANGTAG:L,DATATYPE:$,IRI_LITERAL:t,BLANK_NODE:k,PNAME:w,TRIPLE_APOS_STRING:C,TRIPLE_QUOTE_STRING:M,APOS_STRING_LITERAL:j,QUOTE_STRING_LITERAL:xe,NUMBER:Ee,KEYWORDS:e}}}function Eo(r){var e=r.getLanguage("ttl").exports,t={keyword:"base|10 prefix|10 @base|10 @prefix|10 add all as|0 ask bind by|0 clear construct|10 copymove create data default define delete describe distinct drop exists filter from|0 graph|10 group having in|0 insert limit load minus named|10 not offset optional order reduced select|0 service silent to union using values where with|0",function:"abs asc avg bound ceil coalesce concat containsstrbefore count dayhours desc encode_for_uri floor group_concat if|0 iri isblank isiri isliteral isnumeric isuri langdatatype langmatches lcase max md5 min|0 minutes month now rand regex replace round sameterm sample seconds separator sha1 sha256 sha384 sha512 str strafter strdt strends strlang strlen strstarts struuid substr sum then timezone tz ucase uribnode uuid year",literal:"true|0 false|0",built_in:"a|0"},n={className:"variable",begin:"[?$]"+r.IDENT_RE,relevance:0},s={begin:/"""\s*\{/,end:/"""/,subLanguage:"json",excludeBegin:!0,excludeEnd:!0,relevance:0},i={begin:/'''\s*\{/,end:/'''/,subLanguage:"json",excludeBegin:!0,excludeEnd:!0,relevance:0};return{case_insensitive:!0,keywords:t,aliases:["sparql","rql","rq","ru"],contains:[e.LANGTAG,e.DATATYPE,e.IRI_LITERAL,e.BLANK_NODE,e.PNAME,n,s,i,e.TRIPLE_QUOTE_STRING,e.TRIPLE_APOS_STRING,e.QUOTE_STRING_LITERAL,e.APOS_STRING_LITERAL,e.NUMBER,r.HASH_COMMENT_MODE]}}const ko="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-send'%3e%3cline%20x1='22'%20y1='2'%20x2='11'%20y2='13'%3e%3c/line%3e%3cpolygon%20points='22%202%2015%2022%2011%2013%202%209%2022%202'%3e%3c/polygon%3e%3c/svg%3e",Xr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-x'%3e%3cline%20x1='18'%20y1='6'%20x2='6'%20y2='18'%3e%3c/line%3e%3cline%20x1='6'%20y1='6'%20x2='18'%20y2='18'%3e%3c/line%3e%3c/svg%3e",To="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-edit'%3e%3cpath%20d='M11%204H4a2%202%200%200%200-2%202v14a2%202%200%200%200%202%202h14a2%202%200%200%200%202-2v-7'%3e%3c/path%3e%3cpath%20d='M18.5%202.5a2.121%202.121%200%200%201%203%203L12%2015l-4%201%201-4%209.5-9.5z'%3e%3c/path%3e%3c/svg%3e",vo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-square'%3e%3crect%20x='3'%20y='3'%20width='18'%20height='18'%20rx='2'%20ry='2'%3e%3c/rect%3e%3c/svg%3e",So="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-thumbs-down'%3e%3cpath%20d='M10%2015v4a3%203%200%200%200%203%203l4-9V2H5.72a2%202%200%200%200-2%201.7l-1.38%209a2%202%200%200%200%202%202.3zm7-13h2.67A2.31%202.31%200%200%201%2022%204v7a2.31%202.31%200%200%201-2.33%202H17'%3e%3c/path%3e%3c/svg%3e",Ao="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-thumbs-up'%3e%3cpath%20d='M14%209V5a3%203%200%200%200-3-3l-4%209v11h11.28a2%202%200%200%200%202-1.7l1.38-9a2%202%200%200%200-2-2.3zM7%2022H4a2%202%200%200%201-2-2v-7a2%202%200%200%201%202-2h3'%3e%3c/path%3e%3c/svg%3e";var Vt={exports:{}},rr={},sr,Qr;function Ro(){if(Qr)return sr;Qr=1;function r(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return sr=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,s=0;s<this._errors.length;s++){var i=this._errors[s],a=i.message,o=(e[a]||0)+1;e[a]=o,o>=n&&(t=i,n=o)}return t},sr}var Vr;function yo(){return Vr||(Vr=1,function(r){var e=Ro();r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in t)n[s]=t[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],a=0;a<n.retries;a++)i.push(this.createTimeout(a,n));return t&&t.forever&&!i.length&&i.push(this.createTimeout(a,n)),i.sort(function(o,l){return o-l}),i},r.createTimeout=function(t,n){var s=n.randomize?Math.random()+1:1,i=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return i=Math.min(i,n.maxTimeout),i},r.wrap=function(t,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var i in t)typeof t[i]=="function"&&s.push(i)}for(var a=0;a<s.length;a++){var o=s[a],l=t[o];t[o]=(function(u){var h=r.operation(n),g=Array.prototype.slice.call(arguments,1),m=g.pop();g.push(function(E){h.retry(E)||(E&&(arguments[0]=h.mainError()),m.apply(this,arguments))}),h.attempt(function(){u.apply(t,g)})}).bind(t,l),t[o].options=n}}}(rr)),rr}var ir,Jr;function Oo(){return Jr||(Jr=1,ir=yo()),ir}var es;function Co(){if(es)return Vt.exports;es=1;const r=Oo(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(o){super(),o instanceof Error?(this.originalError=o,{message:o}=o):(this.originalError=new Error(o),this.originalError.stack=this.stack),this.name="AbortError",this.message=o}}const n=(a,o,l)=>{const c=l.retries-(o-1);return a.attemptNumber=o,a.retriesLeft=c,a},s=a=>e.includes(a),i=(a,o)=>new Promise((l,c)=>{o={onFailedAttempt:()=>{},retries:10,...o};const u=r.operation(o);u.attempt(async h=>{try{l(await a(h))}catch(g){if(!(g instanceof Error)){c(new TypeError(`Non-error was thrown: "${g}". You should only throw errors.`));return}if(g instanceof t)u.stop(),c(g.originalError);else if(g instanceof TypeError&&!s(g.message))u.stop(),c(g);else{n(g,h,o);try{await o.onFailedAttempt(g)}catch(m){c(m);return}u.retry(g)||c(u.mainError())}}})});return Vt.exports=i,Vt.exports.default=i,Vt.exports.AbortError=t,Vt.exports}var No=Co();const Io=Tr(No);var Rn={},or={exports:{}},ts;function Lo(){return ts||(ts=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,h,g){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,h||l,g),E=t?t+c:c;return l._events[E]?l._events[E].fn?l._events[E]=[l._events[E],m]:l._events[E].push(m):(l._events[E]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,m=h.length,E=new Array(m);g<m;g++)E[g]=h[g].fn;return E},o.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,u,h,g,m,E){var w=t?t+c:c;if(!this._events[w])return!1;var k=this._events[w],L=arguments.length,$,C;if(k.fn){switch(k.once&&this.removeListener(c,k.fn,void 0,!0),L){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,u),!0;case 3:return k.fn.call(k.context,u,h),!0;case 4:return k.fn.call(k.context,u,h,g),!0;case 5:return k.fn.call(k.context,u,h,g,m),!0;case 6:return k.fn.call(k.context,u,h,g,m,E),!0}for(C=1,$=new Array(L-1);C<L;C++)$[C-1]=arguments[C];k.fn.apply(k.context,$)}else{var M=k.length,j;for(C=0;C<M;C++)switch(k[C].once&&this.removeListener(c,k[C].fn,void 0,!0),L){case 1:k[C].fn.call(k[C].context);break;case 2:k[C].fn.call(k[C].context,u);break;case 3:k[C].fn.call(k[C].context,u,h);break;case 4:k[C].fn.call(k[C].context,u,h,g);break;default:if(!$)for(j=1,$=new Array(L-1);j<L;j++)$[j-1]=arguments[j];k[C].fn.apply(k[C].context,$)}}return!0},o.prototype.on=function(c,u,h){return i(this,c,u,h,!1)},o.prototype.once=function(c,u,h){return i(this,c,u,h,!0)},o.prototype.removeListener=function(c,u,h,g){var m=t?t+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var E=this._events[m];if(E.fn)E.fn===u&&(!g||E.once)&&(!h||E.context===h)&&a(this,m);else{for(var w=0,k=[],L=E.length;w<L;w++)(E[w].fn!==u||g&&!E[w].once||h&&E[w].context!==h)&&k.push(E[w]);k.length?this._events[m]=k.length===1?k[0]:k:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o}(or)),or.exports}var Jt={exports:{}},ar,ns;function Mo(){return ns||(ns=1,ar=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})))),ar}var rs;function Po(){if(rs)return Jt.exports;rs=1;const r=Mo();class e extends Error{constructor(s){super(s),this.name="TimeoutError"}}const t=(n,s,i)=>new Promise((a,o)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){a(n);return}const l=setTimeout(()=>{if(typeof i=="function"){try{a(i())}catch(h){o(h)}return}const c=typeof i=="string"?i:`Promise timed out after ${s} milliseconds`,u=i instanceof Error?i:new e(c);typeof n.cancel=="function"&&n.cancel(),o(u)},s);r(n.then(a,o),()=>{clearTimeout(l)})});return Jt.exports=t,Jt.exports.default=t,Jt.exports.TimeoutError=e,Jt.exports}var yn={},On={},ss;function $o(){if(ss)return On;ss=1,Object.defineProperty(On,"__esModule",{value:!0});function r(e,t,n){let s=0,i=e.length;for(;i>0;){const a=i/2|0;let o=s+a;n(e[o],t)<=0?(s=++o,i-=a+1):i=a}return s}return On.default=r,On}var is;function Do(){if(is)return yn;is=1,Object.defineProperty(yn,"__esModule",{value:!0});const r=$o();class e{constructor(){this._queue=[]}enqueue(n,s){s=Object.assign({priority:0},s);const i={priority:s.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(i);return}const a=r.default(this._queue,i,(o,l)=>l.priority-o.priority);this._queue.splice(a,0,i)}dequeue(){const n=this._queue.shift();return n==null?void 0:n.run}filter(n){return this._queue.filter(s=>s.priority===n.priority).map(s=>s.run)}get size(){return this._queue.length}}return yn.default=e,yn}var os;function Bo(){if(os)return Rn;os=1,Object.defineProperty(Rn,"__esModule",{value:!0});const r=Lo(),e=Po(),t=Do(),n=()=>{},s=new e.TimeoutError;class i extends r{constructor(o){var l,c,u,h;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,o=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:t.default},o),!(typeof o.intervalCap=="number"&&o.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(c=(l=o.intervalCap)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""}\` (${typeof o.intervalCap})`);if(o.interval===void 0||!(Number.isFinite(o.interval)&&o.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(h=(u=o.interval)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""}\` (${typeof o.interval})`);this._carryoverConcurrencyCount=o.carryoverConcurrencyCount,this._isIntervalIgnored=o.intervalCap===1/0||o.interval===0,this._intervalCap=o.intervalCap,this._interval=o.interval,this._queue=new o.queueClass,this._queueClass=o.queueClass,this.concurrency=o.concurrency,this._timeout=o.timeout,this._throwOnTimeout=o.throwOnTimeout===!0,this._isPaused=o.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const o=Date.now();if(this._intervalId===void 0){const l=this._intervalEnd-o;if(l<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},l)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const o=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const l=this._queue.dequeue();return l?(this.emit("active"),l(),o&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(o){if(!(typeof o=="number"&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);this._concurrency=o,this._processQueue()}async add(o,l={}){return new Promise((c,u)=>{const h=async()=>{this._pendingCount++,this._intervalCount++;try{const g=this._timeout===void 0&&l.timeout===void 0?o():e.default(Promise.resolve(o()),l.timeout===void 0?this._timeout:l.timeout,()=>{(l.throwOnTimeout===void 0?this._throwOnTimeout:l.throwOnTimeout)&&u(s)});c(await g)}catch(g){u(g)}this._next()};this._queue.enqueue(h,l),this._tryToStartAnother(),this.emit("add")})}async addAll(o,l){return Promise.all(o.map(async c=>this.add(c,l)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(o=>{const l=this._resolveEmpty;this._resolveEmpty=()=>{l(),o()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(o=>{const l=this._resolveIdle;this._resolveIdle=()=>{l(),o()}})}get size(){return this._queue.size}sizeBy(o){return this._queue.filter(o).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(o){this._timeout=o}}return Rn.default=i,Rn}var zo=Bo();const lr=Tr(zo),Uo=[400,401,402,403,404,405,406,407,408,422],jo=[409];function Ho(r){return r==null||typeof r!="object"?!1:"status"in r&&"statusText"in r&&"text"in r}class on extends Error{constructor(e,t,n){super(`HTTP ${e}: ${t}`),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.status=e,this.text=t,this.response=n}static async fromResponse(e,t){try{return new on(e.status,await e.text(),t!=null&&t.includeResponse?e:void 0)}catch{return new on(e.status,e.statusText,t!=null&&t.includeResponse?e:void 0)}}}class Fo{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"customFetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??4,"default"in lr?this.queue=new lr.default({concurrency:this.maxConcurrency}):this.queue=new lr({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook,this.customFetch=e.fetch}call(e,...t){const n=this.onFailedResponseHook;return this.queue.add(()=>Io(()=>e(...t).catch(async s=>{throw s instanceof Error?s:Ho(s)?await on.fromResponse(s,{includeResponse:!!n}):new Error(s)}),{async onFailedAttempt(s){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||(s==null?void 0:s.code)==="ECONNABORTED")throw s;if(s instanceof on){if(Uo.includes(s.status))throw s;if(jo.includes(s.status))return;n&&s.response&&await n(s.response)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((s,i)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){const t=this.customFetch??fetch;return this.call(()=>t(...e).then(n=>n.ok?n:Promise.reject(n)))}}function as(r){let e,t,n,s,i,a,o;return l(),{feed:c,reset:l};function l(){e=!0,t="",n=0,s=-1,i=void 0,a=void 0,o=""}function c(h){t=t?t+h:h,e&&Go(t)&&(t=t.slice(Is.length)),e=!1;const g=t.length;let m=0,E=!1;for(;m<g;){E&&(t[m]===`
`&&++m,E=!1);let w=-1,k=s,L;for(let $=n;w<0&&$<g;++$)L=t[$],L===":"&&k<0?k=$-m:L==="\r"?(E=!0,w=$-m):L===`
`&&(w=$-m);if(w<0){n=g-m,s=k;break}else n=0,s=-1;u(t,m,k,w),m+=w+1}m===g?t="":m>0&&(t=t.slice(m))}function u(h,g,m,E){if(E===0){o.length>0&&(r({type:"event",id:i,event:a||void 0,data:o.slice(0,-1)}),o="",i=void 0),a=void 0;return}const w=m<0,k=h.slice(g,g+(w?E:m));let L=0;w?L=E:h[g+m+1]===" "?L=m+2:L=m+1;const $=g+L,C=E-L,M=h.slice($,$+C).toString();if(k==="data")o+=M?`${M}
`:`
`;else if(k==="event")a=M;else if(k==="id"&&!M.includes("\0"))i=M;else if(k==="retry"){const j=parseInt(M,10);Number.isNaN(j)||r({type:"reconnect-interval",value:j})}}}const Is=[239,187,191];function Go(r){return Is.every((e,t)=>r.charCodeAt(t)===e)}class an extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}async[Symbol.asyncDispose](){await this.return()}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new an({start(n){return s();function s(){return t.read().then(({done:i,value:a})=>{if(i){n.close();return}return n.enqueue(a),s()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new an({async pull(t){const{value:n,done:s}=await e.next();s&&t.close(),t.enqueue(n)},async cancel(t){await e.return(t)}})}}function Wo(...r){const e=r.filter(n=>n!=null);if(e.length===0)return;if(e.length===1)return e[0];const t=new AbortController;for(const n of r){if(n!=null&&n.aborted)return t.abort(n.reason),t.signal;n==null||n.addEventListener("abort",()=>t.abort(n.reason),{once:!0})}return t.signal}var cr={};function qo(r){try{return typeof process<"u"?cr==null?void 0:cr[r]:void 0}catch{return}}function Ko(r){if(r)return r;const e=["LANGGRAPH","LANGSMITH","LANGCHAIN"];for(const t of e){const n=qo(`${t}_API_KEY`);if(n)return n.trim().replace(/^["']|["']$/g,"")}}class hn{constructor(e){var n;Object.defineProperty(this,"asyncCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeoutMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultHeaders",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.asyncCaller=new Fo({maxRetries:4,maxConcurrency:4,...e==null?void 0:e.callerOptions}),this.timeoutMs=(e==null?void 0:e.timeoutMs)||12e3,this.apiUrl=((n=e==null?void 0:e.apiUrl)==null?void 0:n.replace(/\/$/,""))||"http://localhost:8123",this.defaultHeaders=(e==null?void 0:e.defaultHeaders)||{};const t=Ko(e==null?void 0:e.apiKey);t&&(this.defaultHeaders["X-Api-Key"]=t)}prepareFetchOptions(e,t){const n={...t,headers:{...this.defaultHeaders,...t==null?void 0:t.headers}};n.json&&(n.body=JSON.stringify(n.json),n.headers={...n.headers,"Content-Type":"application/json"},delete n.json);let s=null;typeof(t==null?void 0:t.timeoutMs)<"u"?t.timeoutMs!=null&&(s=AbortSignal.timeout(t.timeoutMs)):s=AbortSignal.timeout(this.timeoutMs),n.signal=Wo(s,n.signal);const i=new URL(`${this.apiUrl}${e}`);if(n.params){for(const[a,o]of Object.entries(n.params)){if(o==null)continue;let l=typeof o=="string"||typeof o=="number"?o.toString():JSON.stringify(o);i.searchParams.append(a,l)}delete n.params}return[i,n]}async fetch(e,t){const n=await this.asyncCaller.fetch(...this.prepareFetchOptions(e,t));if(!(n.status===202||n.status===204))return n.json()}}class Zo extends hn{async createForThread(e,t,n){const s={schedule:n==null?void 0:n.schedule,input:n==null?void 0:n.input,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,if_not_exists:n==null?void 0:n.ifNotExists};return this.fetch(`/threads/${e}/runs/crons`,{method:"POST",json:s})}async create(e,t){const n={schedule:t==null?void 0:t.schedule,input:t==null?void 0:t.input,config:t==null?void 0:t.config,metadata:t==null?void 0:t.metadata,assistant_id:e,interrupt_before:t==null?void 0:t.interruptBefore,interrupt_after:t==null?void 0:t.interruptAfter,webhook:t==null?void 0:t.webhook,multitask_strategy:t==null?void 0:t.multitaskStrategy,if_not_exists:t==null?void 0:t.ifNotExists};return this.fetch("/runs/crons",{method:"POST",json:n})}async delete(e){await this.fetch(`/runs/crons/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/runs/crons/search",{method:"POST",json:{assistant_id:(e==null?void 0:e.assistantId)??void 0,thread_id:(e==null?void 0:e.threadId)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0}})}}class Yo extends hn{async get(e){return this.fetch(`/assistants/${e}`)}async getGraph(e,t){return this.fetch(`/assistants/${e}/graph`,{params:{xray:t==null?void 0:t.xray}})}async getSchemas(e){return this.fetch(`/assistants/${e}/schemas`)}async getSubgraphs(e,t){return t!=null&&t.namespace?this.fetch(`/assistants/${e}/subgraphs/${t.namespace}`,{params:{recurse:t==null?void 0:t.recurse}}):this.fetch(`/assistants/${e}/subgraphs`,{params:{recurse:t==null?void 0:t.recurse}})}async create(e){return this.fetch("/assistants",{method:"POST",json:{graph_id:e.graphId,config:e.config,metadata:e.metadata,assistant_id:e.assistantId,if_exists:e.ifExists,name:e.name}})}async update(e,t){return this.fetch(`/assistants/${e}`,{method:"PATCH",json:{graph_id:t.graphId,config:t.config,metadata:t.metadata,name:t.name}})}async delete(e){return this.fetch(`/assistants/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/assistants/search",{method:"POST",json:{graph_id:(e==null?void 0:e.graphId)??void 0,metadata:(e==null?void 0:e.metadata)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0}})}async getVersions(e,t){return this.fetch(`/assistants/${e}/versions`,{method:"POST",json:{metadata:(t==null?void 0:t.metadata)??void 0,limit:(t==null?void 0:t.limit)??10,offset:(t==null?void 0:t.offset)??0}})}async setLatest(e,t){return this.fetch(`/assistants/${e}/latest`,{method:"POST",json:{version:t}})}}class Xo extends hn{async get(e){return this.fetch(`/threads/${e}`)}async create(e){return this.fetch("/threads",{method:"POST",json:{metadata:e==null?void 0:e.metadata,thread_id:e==null?void 0:e.threadId,if_exists:e==null?void 0:e.ifExists}})}async copy(e){return this.fetch(`/threads/${e}/copy`,{method:"POST"})}async update(e,t){return this.fetch(`/threads/${e}`,{method:"PATCH",json:{metadata:t==null?void 0:t.metadata}})}async delete(e){return this.fetch(`/threads/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/threads/search",{method:"POST",json:{metadata:(e==null?void 0:e.metadata)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0,status:e==null?void 0:e.status}})}async getState(e,t,n){return t!=null?typeof t!="string"?this.fetch(`/threads/${e}/state/checkpoint`,{method:"POST",json:{checkpoint:t,subgraphs:n==null?void 0:n.subgraphs}}):this.fetch(`/threads/${e}/state/${t}`,{params:{subgraphs:n==null?void 0:n.subgraphs}}):this.fetch(`/threads/${e}/state`,{params:{subgraphs:n==null?void 0:n.subgraphs}})}async updateState(e,t){return this.fetch(`/threads/${e}/state`,{method:"POST",json:{values:t.values,checkpoint_id:t.checkpointId,checkpoint:t.checkpoint,as_node:t==null?void 0:t.asNode}})}async patchState(e,t){let n;if(typeof e!="string"){if(typeof e.configurable.thread_id!="string")throw new Error("Thread ID is required when updating state with a config.");n=e.configurable.thread_id}else n=e;return this.fetch(`/threads/${n}/state`,{method:"PATCH",json:{metadata:t}})}async getHistory(e,t){return this.fetch(`/threads/${e}/history`,{method:"POST",json:{limit:(t==null?void 0:t.limit)??10,before:t==null?void 0:t.before,metadata:t==null?void 0:t.metadata,checkpoint:t==null?void 0:t.checkpoint}})}}class Qo extends hn{async*stream(e,t,n){const s={input:n==null?void 0:n.input,command:n==null?void 0:n.command,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,stream_mode:n==null?void 0:n.streamMode,stream_subgraphs:n==null?void 0:n.streamSubgraphs,feedback_keys:n==null?void 0:n.feedbackKeys,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,checkpoint:n==null?void 0:n.checkpoint,checkpoint_id:n==null?void 0:n.checkpointId,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,on_completion:n==null?void 0:n.onCompletion,on_disconnect:n==null?void 0:n.onDisconnect,after_seconds:n==null?void 0:n.afterSeconds,if_not_exists:n==null?void 0:n.ifNotExists},i=e==null?"/runs/stream":`/threads/${e}/runs/stream`,a=await this.asyncCaller.fetch(...this.prepareFetchOptions(i,{method:"POST",json:s,timeoutMs:null,signal:n==null?void 0:n.signal}));let o,l;const c=new TextDecoder,u=(a.body||new ReadableStream({start:h=>h.close()})).pipeThrough(new TransformStream({async start(h){o=as(g=>{if(n!=null&&n.signal&&n.signal.aborted||g.type==="event"&&g.data==="[DONE]"){h.terminate();return}"data"in g&&h.enqueue({event:g.event??"message",data:JSON.parse(g.data)})}),l=()=>{h.enqueue({event:"end",data:void 0})}},async transform(h){const g=c.decode(h);o.feed(g),g.trim()==="event: end"&&l()}}));yield*an.fromReadableStream(u)}async create(e,t,n){const s={input:n==null?void 0:n.input,command:n==null?void 0:n.command,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,webhook:n==null?void 0:n.webhook,checkpoint:n==null?void 0:n.checkpoint,checkpoint_id:n==null?void 0:n.checkpointId,multitask_strategy:n==null?void 0:n.multitaskStrategy,after_seconds:n==null?void 0:n.afterSeconds,if_not_exists:n==null?void 0:n.ifNotExists};return this.fetch(`/threads/${e}/runs`,{method:"POST",json:s,signal:n==null?void 0:n.signal})}async createBatch(e){const t=e.map(n=>({...n,assistant_id:n.assistantId})).map(n=>Object.fromEntries(Object.entries(n).filter(([s,i])=>i!==void 0)));return this.fetch("/runs/batch",{method:"POST",json:t})}async wait(e,t,n){var l,c;const s={input:n==null?void 0:n.input,command:n==null?void 0:n.command,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,checkpoint:n==null?void 0:n.checkpoint,checkpoint_id:n==null?void 0:n.checkpointId,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,on_completion:n==null?void 0:n.onCompletion,on_disconnect:n==null?void 0:n.onDisconnect,after_seconds:n==null?void 0:n.afterSeconds,if_not_exists:n==null?void 0:n.ifNotExists},i=e==null?"/runs/wait":`/threads/${e}/runs/wait`,a=await this.fetch(i,{method:"POST",json:s,timeoutMs:null,signal:n==null?void 0:n.signal});if(((n==null?void 0:n.raiseError)!==void 0?n.raiseError:!0)&&"__error__"in a&&typeof a.__error__=="object"&&a.__error__&&"error"in a.__error__&&"message"in a.__error__)throw new Error(`${(l=a.__error__)==null?void 0:l.error}: ${(c=a.__error__)==null?void 0:c.message}`);return a}async list(e,t){return this.fetch(`/threads/${e}/runs`,{params:{limit:(t==null?void 0:t.limit)??10,offset:(t==null?void 0:t.offset)??0,status:(t==null?void 0:t.status)??void 0}})}async get(e,t){return this.fetch(`/threads/${e}/runs/${t}`)}async cancel(e,t,n=!1,s="interrupt"){return this.fetch(`/threads/${e}/runs/${t}/cancel`,{method:"POST",params:{wait:n?"1":"0",action:s}})}async join(e,t,n){return this.fetch(`/threads/${e}/runs/${t}/join`,{timeoutMs:null,signal:n==null?void 0:n.signal})}async*joinStream(e,t,n){const s=typeof n=="object"&&n!=null&&n instanceof AbortSignal?{signal:n}:n,i=await this.asyncCaller.fetch(...this.prepareFetchOptions(`/threads/${e}/runs/${t}/stream`,{method:"GET",timeoutMs:null,signal:s==null?void 0:s.signal,params:{cancel_on_disconnect:s!=null&&s.cancelOnDisconnect?"1":"0"}}));let a,o;const l=new TextDecoder,c=(i.body||new ReadableStream({start:u=>u.close()})).pipeThrough(new TransformStream({async start(u){a=as(h=>{if(s!=null&&s.signal&&s.signal.aborted||h.type==="event"&&h.data==="[DONE]"){u.terminate();return}"data"in h&&u.enqueue({event:h.event??"message",data:JSON.parse(h.data)})}),o=()=>{u.enqueue({event:"end",data:void 0})}},async transform(u){const h=l.decode(u);a.feed(h),h.trim()==="event: end"&&o()}}));yield*an.fromReadableStream(c)}async delete(e,t){return this.fetch(`/threads/${e}/runs/${t}`,{method:"DELETE"})}}class Vo extends hn{async putItem(e,t,n){e.forEach(i=>{if(i.includes("."))throw new Error(`Invalid namespace label '${i}'. Namespace labels cannot contain periods ('.')`)});const s={namespace:e,key:t,value:n};return this.fetch("/store/items",{method:"PUT",json:s})}async getItem(e,t){e.forEach(s=>{if(s.includes("."))throw new Error(`Invalid namespace label '${s}'. Namespace labels cannot contain periods ('.')`)});const n=await this.fetch("/store/items",{params:{namespace:e.join("."),key:t}});return n?{...n,createdAt:n.created_at,updatedAt:n.updated_at}:null}async deleteItem(e,t){return e.forEach(n=>{if(n.includes("."))throw new Error(`Invalid namespace label '${n}'. Namespace labels cannot contain periods ('.')`)}),this.fetch("/store/items",{method:"DELETE",json:{namespace:e,key:t}})}async searchItems(e,t){const n={namespace_prefix:e,filter:t==null?void 0:t.filter,limit:(t==null?void 0:t.limit)??10,offset:(t==null?void 0:t.offset)??0,query:t==null?void 0:t.query};return{items:(await this.fetch("/store/items/search",{method:"POST",json:n})).items.map(i=>({...i,createdAt:i.created_at,updatedAt:i.updated_at}))}}async listNamespaces(e){const t={prefix:e==null?void 0:e.prefix,suffix:e==null?void 0:e.suffix,max_depth:e==null?void 0:e.maxDepth,limit:(e==null?void 0:e.limit)??100,offset:(e==null?void 0:e.offset)??0};return this.fetch("/store/namespaces",{method:"POST",json:t})}}class Jo{constructor(e){Object.defineProperty(this,"assistants",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"threads",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"crons",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.assistants=new Yo(e),this.threads=new Xo(e),this.runs=new Qo(e),this.crons=new Zo(e),this.store=new Vo(e)}}class ea{constructor({apiUrl:e="",apiKey:t="",model:n=""}){this.abortRequest=()=>{this.abortController.abort(),this.abortController=new AbortController},this.lastMsg=()=>this.messages()[this.messages().length-1],this.scrollToInput=()=>{},this.appendMessage=(a,o="assistant")=>{const[l,c]=He(a),[u,h]=He([]),[g,m]=He([]),E={content:l,setContent:c,steps:u,setSteps:h,role:o,links:g,setLinks:m};this.setMessages(w=>[...w,E])},this.appendContentToLastMsg=(a,o=!1)=>{this.lastMsg().setContent(l=>l+(o?`

`:"")+a)},this.appendStepToLastMsg=(a,o,l="",c=[])=>{this.lastMsg().setSteps(u=>[...u,{node_id:a,label:o,details:l,substeps:c}]),this.scrollToInput()},this.apiUrl=e,this.apiKey=t,this.model=n;const[s,i]=He([]);this.messages=s,this.setMessages=i,this.abortController=new AbortController}}async function ta(r,e){r.appendMessage(e,"user"),r.apiUrl.endsWith(":2024/")||r.apiUrl.endsWith(":8123/")?await ra(r):r.apiUrl.endsWith("/completions/")?await sa(r):await na(r)}async function Ls(r,e){var t;if(e.event==="error")throw new Error(`An error occurred. Please try again. ${e.data.error}: ${e.data.message}`);if(e.event==="updates")for(const n of Object.keys(e.data)){const s=e.data[n];if(s){if(s.steps)for(const i of s.steps)r.appendStepToLastMsg(n,i.label,i.details,i.substeps),i.type==="recall"?r.lastMsg().setContent(""):i.fixed_message&&r.lastMsg().setContent(i.fixed_message);s.structured_output&&s.structured_output.sparql_query&&r.lastMsg().setLinks([{url:_o(s.structured_output.sparql_query,s.structured_output.sparql_endpoint_url),...bo}])}}if(e.event==="messages"){const[n,s]=e.data;if(s.structured_output_format)return;if(((t=n.tool_calls)==null?void 0:t.length)>0){const i=n.tool_calls.map(a=>a.name).join(", ");i&&r.appendStepToLastMsg(s.langgraph_node,`🔧 Calling tools: ${i}`)}n.content&&n.type==="tool"?r.appendStepToLastMsg(s.langgraph_node,`⚗️ Tool ${n.name} result: ${n.content}`):n.content==="</think>"&&n.type==="AIMessageChunk"?(r.appendContentToLastMsg(n.content),r.appendStepToLastMsg(s.langgraph_node,"💭 Thought process",r.lastMsg().content()),r.lastMsg().setContent("")):n.content&&n.type==="AIMessageChunk"&&s.langgraph_node==="call_model"&&r.appendContentToLastMsg(n.content)}}async function na(r){var i;const e=await fetch(`${r.apiUrl}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},signal:r.abortController.signal,body:JSON.stringify({messages:r.messages().map(({content:a,role:o})=>({content:a(),role:o})),stream:!0,...r.model?{model:r.model}:{}})});r.appendMessage("","assistant");const t=(i=e.body)==null?void 0:i.getReader(),n=new TextDecoder("utf-8");let s="";for(;;)if(t){const{value:a,done:o}=await t.read();if(o)break;const l=n.decode(a,{stream:!0});s+=l;let c=s.split(`
`);s=c.pop()||"";for(const u of c.filter(h=>h.trim()!=="")){if(u==="data: [DONE]")return;if(u.startsWith("data: "))try{const h=JSON.parse(u.substring(6));Ls(r,h)}catch(h){console.log("Error parsing line",h,u)}}}}async function ra(r){const e=new Jo({apiUrl:r.apiUrl}),t="agent",n=await e.threads.create(),s=e.runs.stream(n.thread_id,t,{input:{messages:r.messages().map(({content:i,role:a})=>({content:i(),role:a}))},config:{configurable:{}},streamMode:["messages-tuple","updates"],signal:r.abortController.signal});r.appendMessage("","assistant");for await(const i of s)Ls(r,i)}async function sa(r){var i,a;const e=await fetch(`${r.apiUrl}chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},signal:r.abortController.signal,body:JSON.stringify({messages:r.messages().map(({content:o,role:l})=>({content:o(),role:l})),model:r.model,max_tokens:500,stream:!0})});r.appendMessage("","assistant");const t=(i=e.body)==null?void 0:i.getReader(),n=new TextDecoder("utf-8");let s="";for(;;)if(t){const{value:o,done:l}=await t.read();if(l)break;const c=n.decode(o,{stream:!0}),u=s+c;s&&(s="");for(const h of u.split(`
`).filter(g=>g.trim()!=="")){if(h==="data: [DONE]")return;if(h.startsWith("data: "))try{const g=JSON.parse(h.substring(6));if(g.retrieved_docs)r.appendStepToLastMsg(`📚️ Using ${g.retrieved_docs.length} documents`,"retrieve",g.retrieved_docs);else{const m=(a=g.choices[0].delta)==null?void 0:a.content;m&&r.appendContentToLastMsg(m)}}catch{s=h}}}}var ia=Ae('<div><style></style><div></div><form class="p-2 flex"><div class="container flex mx-auto max-w-5xl"><textarea autofocus class="flex-grow px-4 py-2 h-auto border border-slate-400 bg-slate-200 dark:bg-slate-700 dark:border-slate-500 rounded-3xl focus:outline-none focus:ring focus:ring-blue-200 dark:focus:ring-blue-400 overflow-y-hidden resize-none"placeholder="Ask your question"rows=1></textarea><button type=submit class="ml-2 px-4 py-2 rounded-3xl text-slate-500 bg-slate-200 dark:text-slate-400 dark:bg-slate-700"></button><button title="Start a new conversation"class="ml-2 px-4 py-2 rounded-3xl text-slate-500 bg-slate-200 dark:text-slate-400 dark:bg-slate-700"><img alt="Start a new conversation"class=iconBtn>'),oa=Ae('<div><div><div class="flex flex-col items-start"></div><article class="prose max-w-full">'),ls=Ae('<button class="text-gray-400 ml-8 mb-4">'),aa=Ae('<dialog class="bg-white dark:bg-gray-800 m-3 rounded-3xl shadow-md w-full"><button class="fixed top-2 right-8 m-3 px-2 text-xl text-slate-500 bg-gray-200 dark:bg-gray-700 rounded-3xl"title="Close documents details"><img alt="Close the dialog"class=iconBtn></button><article class="prose max-w-full p-3"><div class="flex space-x-2 mb-4">'),la=Ae("<button>"),ca=Ae('<article class="prose max-w-full">'),ua=Ae('<dialog class="bg-white dark:bg-gray-800 m-3 rounded-3xl shadow-md w-full"><button class="fixed top-2 right-8 m-3 px-2 text-xl text-slate-500 bg-gray-200 dark:bg-gray-700 rounded-3xl"title="Close step details"><img alt="Close the dialog"class=iconBtn></button><article class="prose max-w-full p-6">'),fa=Ae('<p class="text-gray-400 ml-8 mb-4">'),ha=Ae('<a target=_blank class=hover:text-inherit><button class="my-3 mr-1 px-3 py-1 text-sm bg-gray-300 dark:bg-gray-700 rounded-3xl align-middle">'),pa=Ae('<button class="mr-1 my-3 px-3 py-1 text-sm hover:bg-gray-300 dark:hover:bg-gray-800 rounded-3xl align-middle"title="Report a good response"><img alt="Thumbs up"height=20px width=20px class=iconBtn>'),da=Ae('<button class="my-3 px-3 py-1 text-sm hover:bg-gray-300 dark:hover:bg-gray-800 rounded-3xl align-middle"title="Report a bad response"><img alt="Thumbs down"height=20px width=20px class=iconBtn>'),ga=Ae('<div class=text-center><div class="bg-orange-300 p-2 text-orange-900 text-sm rounded-3xl font-semibold mb-2 inline-block">'),ma=Ae('<img alt="Stop generation"class=iconBtn>'),ba=Ae('<img alt="Send question"class=iconBtn>'),_a=Ae('<div class="py-2 px-4 justify-center items-center text-sm flex flex-col space-y-2">'),wa=Ae('<button class="px-5 py-2.5 bg-slate-200 text-slate-600 rounded-3xl">');mi("chat-with-context",{chatEndpoint:"",examples:"",apiKey:"",feedbackEndpoint:"",model:""},r=>{ui(),nr.registerLanguage("ttl",xo),nr.registerLanguage("sparql",Eo);const[e,t]=He([]),[n,s]=He(""),[i,a]=He(!1),[o,l]=He(""),[c,u]=He(""),[h,g]=He(""),[m,E]=He(!1),w=new ea({});let k,L;K.use({gfm:!0}),Or(()=>{r.chatEndpoint===""&&s("Please provide an API URL for the chat component to work."),w.apiUrl=r.chatEndpoint,w.apiKey=r.apiKey,w.model=r.model,w.scrollToInput=()=>L.scrollIntoView({behavior:"smooth"}),t(r.examples.split(",").map(F=>F.trim())),g(r.feedbackEndpoint),Ee()});const $=F=>{l(F),document.getElementById(F).showModal(),history.pushState({dialogOpen:!0},""),document.body.style.overflow="hidden",M()},C=()=>{document.body.style.overflow="";const F=document.getElementById(o());F&&F.close(),l("")};Or(()=>{window.addEventListener("popstate",F=>{o()&&(F.preventDefault(),C())})});const M=()=>{document.querySelectorAll("pre code:not(.hljs)").forEach(F=>{nr.highlightElement(F)})};async function j(F){if(!F.trim()||i())return;L.value="",a(!0),s(""),setTimeout(()=>Ee(),0);const Pe=Date.now();try{await ta(w,F)}catch(pe){pe instanceof Error&&pe.name!=="AbortError"&&(console.error("An error occurred when querying the API:",pe),s("An error occurred when querying the API. Please try again or contact an admin."))}a(!1),E(!1),M(),w.scrollToInput(),console.log(`Request completed in ${(Date.now()-Pe)/1e3} seconds`)}function xe(F){fetch(h(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({like:F,messages:w.messages().map(Pe=>({role:Pe.role,content:Pe.content(),steps:Pe.steps().map(pe=>({label:pe.label,details:pe.details,node_id:pe.node_id,substeps:pe.substeps}))}))})}),E(!0)}function Ee(){L.style.height="auto",L.style.height=L.scrollHeight+"px"}return(()=>{var F=ia(),Pe=F.firstChild,pe=Pe.nextSibling,ae=pe.nextSibling,ft=ae.firstChild,Ze=ft.firstChild,$e=Ze.nextSibling,Et=$e.nextSibling,Mt=Et.firstChild;me(Pe,wo);var kt=k;typeof kt=="function"?Ir(kt,pe):k=pe,me(pe,Nt(It,{get each(){return w.messages()},children:(W,J)=>(()=>{var q=oa(),ke=q.firstChild,le=ke.firstChild,Tt=le.nextSibling;return me(le,Nt(It,{get each(){return W.steps()},children:(N,Z)=>N.substeps&&N.substeps.length>0?[(()=>{var z=ls();return z.$$click=()=>{var te,Le;u(((Le=(te=N.substeps)==null?void 0:te[0])==null?void 0:Le.label)||""),$(`step-dialog-${J()}-${Z()}`)},me(z,()=>N.label),je(()=>_e(z,"title",`Click to see the documents used to generate the response

Node: ${N.node_id}`)),z})(),(()=>{var z=aa(),te=z.firstChild,Le=te.firstChild,Re=te.nextSibling,Me=Re.firstChild;return z.addEventListener("close",()=>C()),te.$$click=()=>C(),_e(Le,"src",Xr),me(Me,Nt(It,{get each(){return N.substeps.map(Q=>Q.label)},children:Q=>(()=>{var ce=la();return ce.$$click=()=>{u(Q),M()},_e(ce,"title",`Show ${Q}`),me(ce,Q),je(()=>Gt(ce,`px-4 py-2 rounded-lg transition-all ${c()===Q?"bg-gray-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`)),ce})()})),me(Re,Nt(It,{get each(){return N.substeps.filter(Q=>Q.label===c())},children:Q=>(()=>{var ce=ca();return je(()=>ce.innerHTML=er.sanitize(K.parse(Q.details),{ADD_TAGS:["think"]})),ce})()}),null),je(Q=>{var ce=`step-dialog-${J()}-${Z()}`,ye=`close-dialog-${J()}-${Z()}`;return ce!==Q.e&&_e(z,"id",Q.e=ce),ye!==Q.t&&_e(te,"id",Q.t=ye),Q},{e:void 0,t:void 0}),z})()]:N.details?[(()=>{var z=ls();return z.$$click=()=>{$(`step-dialog-${J()}-${Z()}`)},me(z,()=>N.label),je(()=>_e(z,"title",`Click to see the documents used to generate the response

Node: ${N.node_id}`)),z})(),(()=>{var z=ua(),te=z.firstChild,Le=te.firstChild,Re=te.nextSibling;return z.addEventListener("close",()=>C()),te.$$click=()=>C(),_e(Le,"src",Xr),je(Me=>{var Q=`step-dialog-${J()}-${Z()}`,ce=`close-dialog-${J()}-${Z()}`,ye=er.sanitize(K.parse(N.details),{ADD_TAGS:["think"]});return Q!==Me.e&&_e(z,"id",Me.e=Q),ce!==Me.t&&_e(te,"id",Me.t=ce),ye!==Me.a&&(Re.innerHTML=Me.a=ye),Me},{e:void 0,t:void 0,a:void 0}),z})()]:(()=>{var z=fa();return me(z,()=>N.label),je(()=>_e(z,"title",`Node: ${N.node_id}`)),z})()})),me(ke,Nt(It,{get each(){return W.links()},children:N=>(()=>{var Z=ha(),z=Z.firstChild;return me(z,()=>N.label),je(te=>{var Le=N.url,Re=N.title;return Le!==te.e&&_e(Z,"href",te.e=Le),Re!==te.t&&_e(Z,"title",te.t=Re),te},{e:void 0,t:void 0}),Z})()}),null),me(ke,(()=>{var N=en(()=>!!(h()&&W.role==="assistant"&&J()===w.messages().length-1&&w.lastMsg().content()&&!m()));return()=>N()&&[(()=>{var Z=pa(),z=Z.firstChild;return Z.$$click=()=>xe(!0),_e(z,"src",Ao),Z})(),(()=>{var Z=da(),z=Z.firstChild;return Z.$$click=()=>xe(!1),_e(z,"src",So),Z})()]})(),null),je(N=>{var Z=`w-full flex flex-col flex-grow ${W.role==="user"?"items-end":""}`,z=`py-2.5 mb-2 ${W.role==="user"?"bg-gray-300 rounded-3xl px-5":""}`,te=er.sanitize(K.parse(W.content()),{ADD_TAGS:["think"]});return Z!==N.e&&Gt(q,N.e=Z),z!==N.t&&Gt(ke,N.t=z),te!==N.a&&(Tt.innerHTML=N.a=te),N},{e:void 0,t:void 0,a:void 0}),q})()})),me(F,(()=>{var W=en(()=>!!n());return()=>W()&&(()=>{var J=ga(),q=J.firstChild;return me(q,n),J})()})(),ae),ae.addEventListener("submit",W=>{W.preventDefault(),W.type==="submit"&&W.submitter&&i()&&w.abortRequest(),j(L.value)}),Ze.$$input=()=>Ee(),Ze.$$keydown=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),j(L.value))};var Qe=L;return typeof Qe=="function"?Ir(Qe,Ze):L=Ze,me($e,(()=>{var W=en(()=>!!i());return()=>W()?(()=>{var J=ma();return _e(J,"src",vo),J})():(()=>{var J=ba();return _e(J,"src",ko),J})()})()),Et.$$click=()=>w.setMessages([]),_e(Mt,"src",To),me(F,(()=>{var W=en(()=>w.messages().length<1);return()=>W()&&(()=>{var J=_a();return me(J,Nt(It,{get each(){return e()},children:q=>(()=>{var ke=wa();return ke.$$click=()=>j(q),me(ke,q),ke})()})),J})()})(),null),je(W=>{var J=`chat-with-context w-full h-full flex flex-col ${w.messages().length===0?"justify-center":""}`,q=`overflow-y-auto ${w.messages().length!==0?"flex-grow":""}`,ke=i()?"Stop generation":"Send question";return J!==W.e&&Gt(F,W.e=J),q!==W.t&&Gt(pe,W.t=q),ke!==W.a&&_e($e,"title",W.a=ke),W},{e:void 0,t:void 0,a:void 0}),F})()});ti(["keydown","input","click"]);
